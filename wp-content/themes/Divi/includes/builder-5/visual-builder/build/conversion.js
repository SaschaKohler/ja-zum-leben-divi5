!function(){"use strict";var e={d:function(t,o){for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{ConvertedPresetAttrs:function(){return R},ImportedPresetAttrs:function(){return G},convertEmailServiceAccount:function(){return Q},convertFontIcon:function(){return z},convertGlobalColor:function(){return E},convertIcon:function(){return D},convertImageAndIconWidth:function(){return B},convertImageIconWidth:function(){return K},convertIncludeCategoriesValue:function(){return q},convertIncludeTabsValue:function(){return U},convertInlineFont:function(){return J},convertPreset:function(){return I},convertShortcodeToGbFormat:function(){return P},convertSuccessRedirectQuery:function(){return V},convertTrueFalseToOnOff:function(){return H},enabled:function(){return n},encodeAttrs:function(){return A},filterLegacyPresets:function(){return L},formatDynamicContent:function(){return S},getAttrMap:function(){return u},getModuleGlobalColors:function(){return p},isLegacyAttributeName:function(){return N},isLegacyPostContent:function(){return W},maybeConvertContent:function(){return C},maybeConvertPresetsData:function(){return T},maybeImportLegacyPreset:function(){return F},maybeParseValue:function(){return l},normalizeAbSubjectId:function(){return O},parseShortcode:function(){return g},stickyStatus:function(){return s},valueSanitization:function(){return d}});var o=window.lodash;const n=(e,t,n,r={})=>{const i="responsive"===e?"_last_edited":`__${e}_enabled`,s=n[`${r?.[t]??t}${i}`];return(0,o.isString)(s)&&!(0,o.isUndefined)(s)&&s.startsWith("on")};var r=window.vendor.wp.hooks,i=window.divi.sanitize;const s=e=>{const t={active:!1,viewport:"desktop"},r="sticky_position";return n("responsive",r,e)?((0,o.has)(e,`${r}_phone`)&&"none"!==e[`${r}_phone`]&&""!==e[`${r}_phone`]&&(t.active=!0,t.viewport="phone"),(0,o.has)(e,`${r}_tablet`)&&"none"!==e[`${r}_tablet`]&&""!==e[`${r}_tablet`]&&(t.active=!0,t.viewport="tablet"),(0,o.has)(e,r)&&"none"!==e[r]&&""!==e[r]&&(t.active=!0,t.viewport="desktop")):(0,o.has)(e,r)&&"none"!==e[r]&&""!==e[r]&&(t.active=!0),t},c=["address_lat","address_lng","pin_address_lat","pin_address_lng","zoom_level"],a=["pin.desktop.value.lat","pin.desktop.value.lng","map.desktop.value.lat","map.desktop.value.lng","pin.desktop.value.zoom","map.desktop.value.zoom"],l=(e,t)=>c.includes(e)||a.includes(e)?Number(t):t,d=(e,t,n)=>{let r=e;if(["divi/map","divi/map-pin","divi/fullwidth-map"].includes(n)&&(0,o.isString)(r)&&(r=l(t,r)),"divi/section"===n&&["fullwidth","specialty"].includes(t)&&(r=t),["position_origin_a","position_origin_f","position_origin_r"].includes(t)&&(r=e.toString().replace("_"," ")),["background_position","background_pattern_repeat_origin","background_mask_position"].includes(t))switch(e){case"top_left":r="left top";break;case"top_center":r="center top";break;case"top_right":r="right top";break;case"center_left":r="left center";break;case"center_right":r="right center";break;case"bottom_left":r="left bottom";break;case"bottom_center":r="center bottom";break;case"bottom_right":r="right bottom"}"background_color_gradient_unit"===t&&(r=`100${e}`),t.startsWith("custom_css_")&&(r=e.toString().split("||").join("\n")),"divi/portfolio"===n&&"fullwidth"===t&&(r="off"===e?"grid":"fullwidth"),"text_orientation"===t&&"justified"===e&&(r="justify");return["bottom_divider_arrangement","bottom_divider_arrangement_phone","bottom_divider_arrangement_tablet","top_divider_arrangement","top_divider_arrangement_phone","top_divider_arrangement_tablet"].includes(t)&&(r="above_content"===e?"above":"below"),r=(e=>{const t=e.toString();return/%91|%93|%22|%92|%5c/.test(t)?t.replace(/%22/g,'"').replace(/%92/g,"\\").replace(/%91/g,"&#91;").replace(/%93/g,"&#93;").replace(/%5c/g,"\\"):e})(r),r},u=(e,t,c)=>{const a=e[t],l={},u=t.replace(/_tablet|_phone|__hover|__sticky/,"");let p="desktop",b="value";const f=(0,r.applyFilters)("divi.conversion.moduleLibrary.conversionMap",{})?.[c];if(t.endsWith("_tablet")||t.endsWith("_phone")){if(!n("responsive",u,e,f?.optionEnableMap))return{};p=t.endsWith("_tablet")?"tablet":"phone"}if(t.endsWith("__hover")){if(!n("hover",u,e,f?.optionEnableMap))return{};b="hover"}if(t.endsWith("__sticky")){const t=s(e);if(!t.active||!n("sticky",u,e,f?.optionEnableMap))return{};p=t.viewport,b="sticky"}let m=f?.attributeMap?.[u];if(["fb_built","sticky_enabled","hover_enabled","_dynamic_attributes"].includes(u))return{};if(((0,o.isUndefined)(m)||""===m)&&(m=!(0,o.isEmpty)(f?.attributeMap)&&Object.keys(f?.attributeMap).includes(u)?f?.attributeMap?.[u]:["admin_label","theme_builder_area","global_colors_info","on","locked","open"].includes(u)?`${(0,i.camelCase)(u)}.*`:["global_module","global_parent","nonconvertible","shortcodeName"].includes(u)?(0,i.camelCase)(u):["_builder_version","_module_preset"].includes(u)?(0,i.camelCase)(u.substring(1)):`unknownAttributes.${u}`),f?.conditionalAttributeConversionFunctionMap?.[u]){const t=f.conditionalAttributeConversionFunctionMap[u];"function"==typeof t&&(m=t(m,e))}const _=m.replace("*",`${p}.${b}`);if(f?.valueExpansionFunctionMap?.[u]){const t=f?.valueExpansionFunctionMap[u](a,{attrs:e,desktopName:u,moduleName:c,viewport:p,state:b});t instanceof Error||((0,o.isArray)(t)||(0,o.isObject)(t)?(0,o.forEach)(t,((e,t)=>{l[`${_}.${t}`]=e})):l[_]=t)}else(0,o.isString)(f?.attributeMap?.[u])?l[_]=d(a,u,c):l[_]=a;return l},p=e=>{let t={};const n=(0,o.get)(e,"global_colors_info","");try{const e=n.replace(/%91/g,"[").replace(/%93/g,"]").replace(/%22/g,'"');t=JSON.parse(e)}catch(e){}return["background_color_gradient_stops","button_bg_gradient_stops"].forEach((n=>{const r=(0,o.get)(e,n,"");if(!r)return;const i=r.match(/\bgcid-[\w-]+/g);i&&i.forEach((e=>{e in t||(t[e]=[]),t[e].includes(n)||t[e].push(n)}))})),t};var b=window.vendor.wp.shortcode,f=window.divi.constantLibrary;const m=(e,t,n)=>{const r=["_builder_version","_module_preset","nonconvertible"];return{...(0,o.keys)(e).filter((e=>r.includes(e))).reduce(((t,o)=>(t[o]=e[o],t)),{}),nonconvertible:n,shortcodeName:t}},_=e=>{const{nonconvertible:t,content:n,modules:r,shortcodeModules:i,shortcodeName:s}=e;if("yes"===t)return!1;if(["et_pb_section","et_pb_row","et_pb_row_inner","et_pb_column","et_pb_column_inner"].includes(s))return!0;const c=i[s].childrenName;if(!c)return!1;const a=(0,o.map)(c,(e=>r[e].d4Shortcode));return new RegExp(`^\\[(${a.join("|")})`).test((0,o.trim)(n))},g=(e,t,n)=>{const r=(0,o.filter)(t,(e=>!(0,o.isEmpty)(e.d4Shortcode))),i=(0,o.keyBy)(r,"name"),s=(0,o.keyBy)(r,"d4Shortcode");let c=(0,b.regexp)(f.shortcodeTagPattern).exec(e),a="",l="";const d=[];for(;null!==c;){const e=c&&c[2]&&"et_pb_unsupported"!==c[2]&&s[c[2]]?"no":"yes",r=c[2].toString(),u="yes"===e?m((0,o.get)((0,b.attrs)(c[3]),"named"),r,e):(0,o.get)((0,b.attrs)(c[3]),"named"),p=_({nonconvertible:e,content:c[5],modules:i,shortcodeModules:s,shortcodeName:r}),v=p?r:"";a=c.input,l="yes"===e?c[0]:p?g(c[5],t,v):c[5];const h=c[0];d.push({name:r,attrs:u,parentName:n??"",content:l,originalShortcode:h}),a=a.replace(c[0],""),c=(0,b.regexp)(f.shortcodeTagPattern).exec(a)}return d};var v=window.vendor.wp.blockSerializationDefaultParser,h=window.divi.data,y=window.divi.moduleUtils;const w=/@ET-DC@([^@]+)@/,k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",S=(e,t,o="content")=>`$variable(${JSON.stringify({type:o,value:{name:e,settings:t}})})$`,$=/@ET-DC@([^@]+)@/g,x=e=>{try{return e.replace($,((e,t)=>{const o=(e=>{const t=String(e),o=[6,4,2,0],n=k.slice(0,-1);let r,i="",s=0,c=0,a="";try{for(let e=0;(r=n.indexOf(t[e]))>-1;e++)s=s<<6|r,e%4&&(c=255&s>>o[e%4],c<128?(i+=a?decodeURI(a):"",i+=String.fromCharCode(c),a=""):a+=`%${`0${c.toString(16)}`.slice(-2)}`);return i+=a?decodeURI(a):"",i}catch(e){throw new Error("base64 malformed!")}})(t);if(t!==(e=>{const t=String(e),o=[2,4,6,8];let n=k,r="",i=0;for(let e=0,s=0;e<t.length||63&i||(n="=",s%4!=0);e++){const c=t.charCodeAt(e),a=c>127?encodeURI(t.charAt(e)).split("%").slice(1).map((e=>parseInt(e,16))):[c];for(let e=0;e<a.length;e++)i=i<<8|a[e],r+=n.charAt(63&i>>o[s%4]),s++,3==s%4&&(r+=Number.isNaN(a[e])?"=":n.charAt(63&i),s++,i=0)}return r})(o))return e;const n=JSON.parse(o);return S(n.content,{...n.settings})}))}catch(t){return e}};var j=window.divi.globalData;const E=(e,t,o)=>{const n=Object.keys(o);for(let r=0;r<n.length;r++){const i=n[r];if(o[i].includes(t))if("object"==typeof e&&t.includes("_gradient_stops")){if((0,j.isGlobalColor)(`var(--${e.color})`)){const t=(0,h.select)("divi/global-data").getGlobalColorById(e.color);if(t&&e.color===i){e={position:e.position,color:"active"===t.status?S(i,{},"color"):t.color};break}if(e.color===i){const t=(0,h.select)("divi/global-data").getLegacyGlobalColors();if(t&&t[i]){const o=t[i],n="yes"===o.active?"active":"inactive";(0,h.dispatch)("divi/global-data").addGlobalColor({color:o.color,id:i,status:n}),e={position:e.position,color:"active"===n?S(i,{},"color"):o.color};break}if("string"==typeof e.color&&e.color.startsWith("gcid-")){e={position:e.position,color:`var(--${e.color})`};break}}}else if("string"==typeof e.color&&e.color.startsWith("gcid-")){e={position:e.position,color:`var(--${e.color})`};break}}else if((0,j.isGlobalColor)(`var(--${i})`)){const t=(0,h.select)("divi/global-data").getGlobalColorById(i);if(t&&e===i){e="active"===t.status?S(i,{},"color"):t.color;break}if(e===i){const t=(0,h.select)("divi/global-data").getLegacyGlobalColors();if(t&&t[i]){const o=t[i],n="yes"===o.active?"active":"inactive";(0,h.dispatch)("divi/global-data").addGlobalColor({color:o.color,id:i,status:n}),e="active"===n?S(i,{},"color"):o.color;break}}}}return"string"==typeof e&&e.startsWith("gcid-")?`var(--${e})`:e},N=e=>(0,h.select)("divi/settings").getSetting("legacyAttributeNames").includes(e),A=(e,t,n=null,i=null,s=null)=>{const c={};null!==n&&(e.content=n),e=(e=>((0,o.has)(e,"ab_subject")&&(0,o.has)(e,"ab_subject_id")&&(e={...e,disabled_on:"1"===e.ab_subject_id.toString()?"off|off|off":"on|on|on"}),(0,o.omit)(e,["ab_subject","ab_subject_id","ab_goal"])))(e);const a=p(e),d=(0,y.maybeRestorePresetModuleName)(t);if((0,o.forEach)((0,o.keys)(e),(n=>{if(n.endsWith("_last_edited")||n.endsWith("__hover_enabled")||n.endsWith("__sticky_enabled"))return;if("divi/section"===t&&["specialty","fullwidth"].includes(n)&&"on"!==e[n])return;if("global_colors_info"===n)return;const r=u(e,n,d);(0,o.keys)(r).length>0&&(0,o.forEach)(r,((t,r)=>{var i;(0,o.size)(a)>0&&(t=E(t,n,a)),!(0,o.isObject)(t)&&(i=t?.toString()??"",w.test(i))&&(t=x(t.toString())),["divi/map","divi/map-pin","divi/fullwidth-map"].includes(d)&&(t=l(r,t)),(0,o.set)(c,r,t),"background_enable_color"===n&&"off"===t&&(0,o.set)(c,"module.decoration.background.desktop.value.color",""),"divi/social-media-follow-network"!==d||Object.prototype.hasOwnProperty.call(e,"background_color")||(0,o.set)(c,"module.decoration.background.desktop.value.color","")}))})),c.unknownAttributes&&"object"==typeof c.unknownAttributes){const o=(0,r.applyFilters)("divi.conversion.moduleLibrary.conversionMap",{}),n=Object.keys(c.unknownAttributes),i={},s={da_disable_devices:{da_is_popup:"on"}};n.forEach((n=>{if(N(n))return;if(s[n]){const t=s[n];let o=!0;if(Object.keys(t).forEach((n=>{const r=t[n];e[n]&&e[n]===r||(o=!1)})),!o)return}const r=Object.entries(o).some((([e,o])=>{if(e===t)return!1;return Object.keys(o?.attributeMap??{}).includes(n)})),a=["collapsed","use_background_color"].includes(n);r||a||(i[n]=c.unknownAttributes[n])})),Object.keys(i).length>0?c.unknownAttributes=i:delete c.unknownAttributes}null!==i&&c.unknownAttributes&&Object.keys(c?.unknownAttributes).length>0&&(c.shortcodeName=s,c.content=i);return["divi/section","divi/row","divi/row-inner","divi/column","divi/column-inner","divi/group"].includes(d)&&(0,o.set)(c,"module.decoration.layout.desktop.value.display","block"),JSON.stringify(c)};let M;const P=(e,t=!0,n=null)=>{!0===t&&(M="");const r=(0,h.select)("divi/module-library").getModules(),i=(0,o.filter)(r,(e=>!(0,o.isEmpty)(e.d4Shortcode)));let s={};return(0,o.forEach)(i,(e=>{s={...s,[e.d4Shortcode]:e.name}})),e.forEach((e=>{let t="yes"===(0,o.get)(e,"attrs.nonconvertible")?"yes":"no",r="yes"===t||(0,o.isUndefined)(s[e.name])?"divi/shortcode-module":s[e.name];const i="yes"!==t&&"string"==typeof e.content&&""!==e.content?e.content:null,c=n||e.attrs.global_module,a={...e.attrs,...n&&{global_parent:c}},l=A(a,r,i,e.originalShortcode,e.name);if(l.includes("unknownAttributes")&&s[e.name]&&(t="yes",r="divi/shortcode-module",e.originalShortcode&&(e.content=e.originalShortcode)),"object"==typeof e.content&&"divi/shortcode-module"!==r)M+=`\x3c!-- wp:${r} ${l} --\x3e`,P(e.content,!1,c),M+=`\x3c!-- /wp:${r} --\x3e`;else if("yes"===t){const t="string"==typeof e.content?e.content:"";M+=`\x3c!-- wp:${r} ${l} --\x3e${t}\x3c!-- /wp:${r} --\x3e`}else M+=`\x3c!-- wp:${r} ${l} --\x3e\x3c!-- /wp:${r} --\x3e`})),M},O=e=>{if(!e.includes("ab_subject_id"))return e;if(e.includes('ab_subject_id="1"'))return e;if(1===(e.match(/ab_subject_id/g)||[]).length){const t=e.match(/ab_subject_id="(\d+)"/);if(t&&"1"!==t[1])return e.replace(/ab_subject_id="\d+"/,'ab_subject_id="1"')}return e.replace(/ab_subject_id="\d+"/,'ab_subject_id="1"')},C=e=>{const t=O(e);let n=t;const r=(0,h.select)("divi/module-library").getModules();if(f.startsWithShortcodeRegExp.test(t))n=P(g(t,r));else if((0,o.includes)(t,"\x3c!-- wp:divi/layout --\x3e")){const e=(0,v.parse)(t);n="",(0,o.forEach)(e,(e=>{if("divi/layout"===e.blockName)n+=P(g((0,o.trim)(e.innerHTML),r));else if(null===e.blockName)n+=e.innerHTML;else{const t=e.blockName.replace("core/","wp:");n+=`\x3c!-- ${t} ${JSON.stringify(e.attrs)} --\x3e${e.innerHTML}\x3c!-- /${t} --\x3e`}}))}return n},I=(e,t,n)=>{const r=(0,h.select)("divi/settings").getSetting(["version"]),i=(0,h.select)("divi/module-library").getModules(),s=(0,o.filter)(i,(e=>!(0,o.isEmpty)(e.d4Shortcode)));let c={};(0,o.forEach)(s,(e=>{c={...c,[e.d4Shortcode]:e.name}})),c={...c,et_pb_section_fullwidth:"divi/fullwidth-section",et_pb_section_specialty:"divi/specialty-section"};const a=c[n];if(!a)return new Promise((e=>{e(null)}));const l=A(e?.settings,a),d=JSON.parse(l),u=(0,y.maybeRestorePresetModuleName)(a);return new Promise((o=>{(0,y.getPresetAttrsMapping)(u).then((({map:n})=>{const i={id:t,moduleName:a,name:e.name,attrs:d,styleAttrs:(0,y.getPresetAttrs)({moduleAttrs:d,presetType:["style"],map:n}),renderAttrs:(0,y.getPresetAttrs)({moduleAttrs:d,presetType:["html","script"],map:n}),version:e.version||r,type:"module"};o(i)})).catch((()=>{o(null)}))}))};const T=e=>{if(function(e){return(0,o.has)(e,"module")||(0,o.has)(e,"group")}(e))return new Promise((t=>{t(e)}));const t={module:{}};if((0,o.isEmpty)(e))return new Promise((e=>{e(t)}));const n=(0,h.select)("divi/module-library").getModules(),r=(0,o.filter)(n,(e=>!(0,o.isEmpty)(e.d4Shortcode)));let i={};const s={};(0,o.forEach)(r,(t=>{i={...i,[t.d4Shortcode]:t.name},e[t.d4Shortcode]?.default&&(s[t.name]=e[t.d4Shortcode]?.default)})),e?.et_pb_section_fullwidth?.default&&(s["divi/fullwidth-section"]=e?.et_pb_section_fullwidth?.default),e?.et_pb_section_specialty?.default&&(s["divi/specialty-section"]=e?.et_pb_section_fullwidth?.default);const c=(0,o.map)(e,((e,t)=>(0,o.map)(e?.presets,((e,o)=>I(e,o,t)))));return new Promise((e=>{Promise.all(c.flat()).then((n=>{n.forEach((e=>{(0,o.set)(t,`module.${e?.moduleName}.items.${e?.id}`,e),t?.module?.[e?.moduleName]?.default||(0,o.set)(t,`module.${e?.moduleName}.default`,s[e?.moduleName]??"")})),e(t)})).catch((()=>{e(t)}))}))},W=e=>!!f.startsWithShortcodeRegExp.test(e)||!!(0,o.includes)(e,"\x3c!-- wp:divi/layout --\x3e"),L=(e,t)=>{const o={module:{}};return Object.keys(t.module).forEach((n=>{const r=e?.module?.[n]?.items,i=t.module[n].items;if(e?.module?.[n]){const s={};Object.keys(i).forEach((e=>{r[e]||(s[e]=i[e])})),Object.keys(s).length>0&&(o.module[n]={...o.module[n],items:s,default:e?.module[n]?.default},t.module[n].default&&(o.module[n].default=t.module[n].default))}else Object.keys(i).length>0&&(o.module[n]={...t.module[n]})})),o},F=()=>{const e=(0,h.select)("divi/settings").getSetting(["post","content"]);if(!W(e))return;if((0,h.select)("divi/settings").getSetting(["globalPresets","isLegacyDataImported"]))return;const t=(0,h.select)("divi/settings").getSetting(["globalPresets","legacyData"])?.asMutable({deep:!0}),o=(0,h.select)("divi/settings").getSetting(["globalPresets","data"])?.asMutable({deep:!0});T(t).then((e=>{if(t){const t=(0,y.processPresets)(e),n=L(o,t.presets);(0,h.dispatch)("divi/global-data").importPresets((0,y.removeEmptyObjectRecursive)(n,!0),!0)}})).catch((e=>{console.log(e)}))};let G,R;G||(G={}),R||(R={});const z=e=>{const t=e.split("||"),n={},r=(0,o.get)(t,0,""),i=(0,o.get)(t,1,""),s=(0,o.get)(t,2,"");return r&&(n.unicode=r),i&&(n.type=i),s&&(n.weight=s),n},D=e=>{if(/^%*[0-9]*%*$/.test(e)){const t=["&#x22;","&#x33;","&#x37;","&#x3b;","&#x3f;","&#x43;","&#x47;","&#xe03a;","&#xe044;","&#xe048;","&#xe04c;"],n=/^%*([0-9]*)%*$/.exec(e)[1]||null;return{unicode:(0,o.isNull)(n)?"":t[parseInt(n)],type:"divi",weight:"400"}}return z(e)},U=e=>(0,o.isString)(e)?e.split("|").filter((e=>!(0,o.isEmpty)(e))):[],J=e=>(0,o.isString)(e)?e.split(","):[],B=e=>({image:e,icon:e}),H=e=>"true"===e?"on":"off",V=e=>{let t=[];const o=["name","last_name","email","ip_address","css_id"],n=e?.split("|")??[];return n.length===o.length&&n.forEach(((e,n)=>{"on"===e&&(t=t.concat(o[n]))})),t},Q=(e,{attrs:t,desktopName:o})=>{let n=t?.provider;n||(n="mailchimp");return[`${n}_list`,`${n}_account_name`].includes(o)?e:new Error(`The attribute name ${o} did match with selected provider ${n}.`)},q=e=>{if(!(0,o.isString)(e))return[];if((0,o.isEmpty)(e.trim()))return[];const t=e.split(",").map((e=>e.trim())).filter((e=>!(0,o.isEmpty)(e))),n=(0,y.getCategoriesForPostType)("product"),r=Array.isArray(n)&&n.length>0;return(0,o.map)(t,(e=>{if("all"===e||"current"===e)return e;const t=Number(e);if(!Number.isNaN(t)){if(r){return(0,o.find)(n,["term_id",t])?e:void 0}return e}})).filter(Boolean)},K=(e,t)=>{for(let o=0;o<e.length;o++){const n=e[o];if("use_icon_on"===n.condition&&"on"===t?.use_icon)return n.path;if("use_icon_off"===n.condition&&"off"===(t?.use_icon??"off"))return n.path}return e[0].path};(window.divi=window.divi||{}).conversion=t}();