!function(){var e={53316:function(e){function t(e,t,n,r){var o,i=null==(o=r)||"number"==typeof o||"boolean"==typeof o?r:n(r),a=t.get(i);return void 0===a&&(a=e.call(this,r),t.set(i,a)),a}function n(e,t,n){var r=Array.prototype.slice.call(arguments,3),o=n(r),i=t.get(o);return void 0===i&&(i=e.apply(this,r),t.set(o,i)),i}function r(e,t,n,r,o){return n.bind(t,e,r,o)}function o(e,o){return r(e,this,1===e.length?t:n,o.cache.create(),o.serializer)}function i(){return JSON.stringify(arguments)}function a(){this.cache=Object.create(null)}a.prototype.has=function(e){return e in this.cache},a.prototype.get=function(e){return this.cache[e]},a.prototype.set=function(e,t){this.cache[e]=t};var s={create:function(){return new a}};e.exports=function(e,t){var n=t&&t.cache?t.cache:s,r=t&&t.serializer?t.serializer:i;return(t&&t.strategy?t.strategy:o)(e,{cache:n,serializer:r})},e.exports.strategies={variadic:function(e,t){return r(e,this,n,t.cache.create(),t.serializer)},monadic:function(e,n){return r(e,this,t,n.cache.create(),n.serializer)}}},33042:function(e,t,n){var r;!function(){"use strict";var o=function e(t){var n,r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element"),o={use_static:!1};function i(e){var t=Object.getPrototypeOf(e);return t?Object.create(t):{}}function a(e,t,n){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!1,value:n})}function s(e,t){a(e,t,(function(){throw new I("The "+t+" method cannot be invoked on an Immutable data structure.")}))}"object"!=typeof(n=t)||Array.isArray(n)||null===n||void 0!==t.use_static&&(o.use_static=Boolean(t.use_static));var u="__immutable_invariants_hold";function l(e){return"object"!=typeof e||(null===e||Boolean(Object.getOwnPropertyDescriptor(e,u)))}function d(e,t){return e===t||e!=e&&t!=t}function c(e){return!(null===e||"object"!=typeof e||Array.isArray(e)||e instanceof Date)}var p=["setPrototypeOf"],m=p.concat(["push","pop","sort","splice","shift","unshift","reverse"]),g=["keys"].concat(["map","filter","slice","concat","reduce","reduceRight"]),f=p.concat(["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]);function I(e){this.name="MyError",this.message=e,this.stack=(new Error).stack}function y(e,t){for(var n in a(e,u,!0),t)t.hasOwnProperty(n)&&s(e,t[n]);return Object.freeze(e),e}function E(e,t){var n=e[t];a(e,t,(function(){return W(n.apply(e,arguments))}))}function _(e,t,n){var r=n&&n.deep;if(e in this&&(r&&this[e]!==t&&c(t)&&c(this[e])&&(t=W.merge(this[e],t,{deep:!0,mode:"replace"})),d(this[e],t)))return this;var o=T.call(this);return o[e]=W(t),M(o)}I.prototype=new Error,I.prototype.constructor=Error;var h=W([]);function v(e,t,n){var r=e[0];if(1===e.length)return _.call(this,r,t,n);var o,i=e.slice(1),a=this[r];if("object"==typeof a&&null!==a)o=W.setIn(a,i,t);else{var s=i[0];o=""!==s&&isFinite(s)?v.call(h,i,t):k.call(w,i,t)}if(r in this&&a===o)return this;var u=T.call(this);return u[r]=o,M(u)}function M(e){for(var t in g){if(g.hasOwnProperty(t))E(e,g[t])}o.use_static||(a(e,"flatMap",O),a(e,"asObject",C),a(e,"asMutable",T),a(e,"set",_),a(e,"setIn",v),a(e,"update",G),a(e,"updateIn",F),a(e,"getIn",x));for(var n=0,r=e.length;n<r;n++)e[n]=W(e[n]);return y(e,m)}function b(){return new Date(this.getTime())}function O(e){if(0===arguments.length)return this;var t,n=[],r=this.length;for(t=0;t<r;t++){var o=e(this[t],t,this);Array.isArray(o)?n.push.apply(n,o):n.push(o)}return M(n)}function A(e){if(void 0===e&&0===arguments.length)return this;if("function"!=typeof e){var t=Array.isArray(e)?e.slice():Array.prototype.slice.call(arguments);t.forEach((function(e,t,n){"number"==typeof e&&(n[t]=e.toString())})),e=function(e,n){return-1!==t.indexOf(n)}}var n=i(this);for(var r in this)this.hasOwnProperty(r)&&!1===e(this[r],r)&&(n[r]=this[r]);return $(n)}function T(e){var t,n,r=[];if(e&&e.deep)for(t=0,n=this.length;t<n;t++)r.push(S(this[t]));else for(t=0,n=this.length;t<n;t++)r.push(this[t]);return r}function C(e){"function"!=typeof e&&(e=function(e){return e});var t,n={},r=this.length;for(t=0;t<r;t++){var o=e(this[t],t,this),i=o[0],a=o[1];n[i]=a}return $(n)}function S(e){return!e||"object"!=typeof e||!Object.getOwnPropertyDescriptor(e,u)||e instanceof Date?e:W.asMutable(e,{deep:!0})}function D(e,t){for(var n in e)Object.getOwnPropertyDescriptor(e,n)&&(t[n]=e[n]);return t}function L(e,t){if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#merge can only be invoked with objects or arrays, not "+JSON.stringify(e));var n,r,o=Array.isArray(e),a=t&&t.deep,s=t&&t.mode||"merge",u=t&&t.merger;function l(e,r,o){var s,l=W(r[o]),p=u&&u(e[o],l,t),m=e[o];void 0===n&&void 0===p&&e.hasOwnProperty(o)&&d(l,m)||(d(m,s=void 0!==p?p:a&&c(m)&&c(l)?W.merge(m,l,t):l)&&e.hasOwnProperty(o)||(void 0===n&&(n=D(e,i(e))),n[o]=s))}function p(e,t){for(var r in e)t.hasOwnProperty(r)||(void 0===n&&(n=D(e,i(e))),delete n[r])}if(o)for(var m=0,g=e.length;m<g;m++){var f=e[m];for(r in f)f.hasOwnProperty(r)&&l(void 0!==n?n:this,f,r)}else{for(r in e)Object.getOwnPropertyDescriptor(e,r)&&l(this,e,r);"replace"===s&&p(this,e)}return void 0===n?this:$(n)}function R(e,t){var n=t&&t.deep;if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#replace can only be invoked with objects or arrays, not "+JSON.stringify(e));return W.merge(this,e,{deep:n,mode:"replace"})}var U,P,N,w=W({});function k(e,t,n){if(!Array.isArray(e)||0===e.length)throw new TypeError('The first argument to Immutable#setIn must be an array containing at least one "key" string.');var r=e[0];if(1===e.length)return V.call(this,r,t,n);var o,a=e.slice(1),s=this[r];if(o=this.hasOwnProperty(r)&&"object"==typeof s&&null!==s?W.setIn(s,a,t):k.call(w,a,t),this.hasOwnProperty(r)&&s===o)return this;var u=D(this,i(this));return u[r]=o,$(u)}function V(e,t,n){var r=n&&n.deep;if(this.hasOwnProperty(e)&&(r&&this[e]!==t&&c(t)&&c(this[e])&&(t=W.merge(this[e],t,{deep:!0,mode:"replace"})),d(this[e],t)))return this;var o=D(this,i(this));return o[e]=W(t),$(o)}function G(e,t){var n=Array.prototype.slice.call(arguments,2),r=this[e];return W.set(this,e,t.apply(r,[r].concat(n)))}function B(e,t){for(var n=0,r=t.length;null!=e&&n<r;n++)e=e[t[n]];return n&&n==r?e:void 0}function F(e,t){var n=Array.prototype.slice.call(arguments,2),r=B(this,e);return W.setIn(this,e,t.apply(r,[r].concat(n)))}function x(e,t){var n=B(this,e);return void 0===n?t:n}function j(e){var t,n=i(this);if(e&&e.deep)for(t in this)this.hasOwnProperty(t)&&(n[t]=S(this[t]));else for(t in this)this.hasOwnProperty(t)&&(n[t]=this[t]);return n}function Y(){return{}}function $(e){return o.use_static||(a(e,"merge",L),a(e,"replace",R),a(e,"without",A),a(e,"asMutable",j),a(e,"set",V),a(e,"setIn",k),a(e,"update",G),a(e,"updateIn",F),a(e,"getIn",x)),y(e,p)}function W(e,t,n){if(l(e)||function(e){return"object"==typeof e&&null!==e&&(60103===e.$$typeof||e.$$typeof===r)}(e)||function(e){return"undefined"!=typeof File&&e instanceof File}(e)||function(e){return"undefined"!=typeof Blob&&e instanceof Blob}(e)||function(e){return e instanceof Error}(e))return e;if(function(e){return"object"==typeof e&&"function"==typeof e.then}(e))return e.then(W);if(Array.isArray(e))return M(e.slice());if(e instanceof Date)return i=new Date(e.getTime()),o.use_static||a(i,"asMutable",b),y(i,f);var i,s=t&&t.prototype,u=(s&&s!==Object.prototype?function(){return Object.create(s)}:Y)();if(null==n&&(n=64),n<=0)throw new I("Attempt to construct Immutable from a deeply nested object was detected. Have you tried to wrap an object with circular references (e.g. React element)? See https://github.com/rtfeldman/seamless-immutable/wiki/Deeply-nested-object-was-detected for details.");for(var d in n-=1,e)Object.getOwnPropertyDescriptor(e,d)&&(u[d]=W(e[d],void 0,n));return $(u)}function H(e){return function(){var t=[].slice.call(arguments),n=t.shift();return e.apply(n,t)}}function z(e,t){return function(){var n=[].slice.call(arguments),r=n.shift();return Array.isArray(r)?t.apply(r,n):e.apply(r,n)}}return W.from=W,W.isImmutable=l,W.ImmutableError=I,W.merge=H(L),W.replace=H(R),W.without=H(A),W.asMutable=(U=j,P=T,N=b,function(){var e=[].slice.call(arguments),t=e.shift();return Array.isArray(t)?P.apply(t,e):t instanceof Date?N.apply(t,e):U.apply(t,e)}),W.set=z(V,_),W.setIn=z(k,v),W.update=H(G),W.updateIn=H(F),W.getIn=H(x),W.flatMap=H(O),W.asObject=H(C),o.use_static||(W.static=e({use_static:!0})),Object.freeze(W),W}();void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)}()}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};!function(){"use strict";n.r(r),n.d(r,{__DEPRECATED__getModulesByIds:function(){return Zt},addColumnViaDivider:function(){return te},addFlexColumnViaDivider:function(){return ne},addGrid:function(){return oe},addModule:function(){return ie},addModuleGroup:function(){return ae},addRow:function(){return se},addSpecialtySection:function(){return ue},changeColumnStructure:function(){return le},changeColumnStructureForDragAndDrop:function(){return me},changeFlexColumnStructure:function(){return de},changeFlexColumnStructureForDragAndDrop:function(){return ge},changePricingTablesFlexColumnStructure:function(){return pe},clearLayout:function(){return fe},clearMemoizedFilterModulesByIds:function(){return j},clearRemovedModules:function(){return Ie},cloneColumn:function(){return ye},cloneFlexColumn:function(){return Ee},cloneModule:function(){return _e},conditionalDebouncedHistoryUpdate:function(){return yt},convertSelectedModulesToGroup:function(){return re},copyModule:function(){return he},copyModuleFromLibrary:function(){return ve},copyModuleFromPayload:function(){return Me},copyModulesFromPayload:function(){return be},createMemoizeFunction:function(){return G},disableGlobalModule:function(){return Oe},editChildren:function(){return Ae},editGroupPresetAttr:function(){return tt},editModuleAttribute:function(){return Te},editModuleProp:function(){return Ce},editUnsyncAttrs:function(){return Se},effects:function(){return ht},extractInlineFontFamilies:function(){return H},filterModulesByIds:function(){return B},findModuleByInteractionTarget:function(){return Ln},getAncestorModules:function(){return xt},getAvailableLoopOptions:function(){return Yt},getChildModules:function(){return En},getClonedModules:function(){return N},getCloudLayoutMetadata:function(){return yn},getContent:function(){return $t},getDescendantModulesByType:function(){return _n},getGlobalLayoutId:function(){return Wt},getGlobalLayoutOwners:function(){return Ht},getGroupPresetAttr:function(){return hn},getInsertableContent:function(){return w},getModule:function(){return zt},getModuleAttr:function(){return Xt},getModuleAttrs:function(){return Jt},getModuleCssVariables:function(){return Cn},getModuleLoopData:function(){return Dn},getModuleName:function(){return Qt},getModuleStructureIds:function(){return en},getModuleType:function(){return tn},getModuleWithChildren:function(){return nn},getModulesByIds:function(){return Kt},getParentModule:function(){return Ft},getParentModuleId:function(){return rn},getParentModuleType:function(){return on},getRootModuleIds:function(){return an},getSelectedModulePreset:function(){return Mn},getSelectedOptionGroupPreset:function(){return On},getSiblingModuleIds:function(){return sn},getSpecialtySectionStatus:function(){return un},getUsedPresets:function(){return ln},hasAncestorColumnType:function(){return Tn},hasResponsiveValues:function(){return cn},hasStickyState:function(){return pn},importContent:function(){return De},insertIdIntoIdList:function(){return p},isCloneable:function(){return P},isContentEmpty:function(){return gn},isDisabled:function(){return mn},isNestedModule:function(){return An},isSectionOrInsideSection:function(){return fn},isStickyStateActive:function(){return In},longerDebouncedAddHistoryLayoutItem:function(){return It},memoizedFilterModulesByIds:function(){return x},mergeGlobalModules:function(){return Le},moveModule:function(){return Re},moveModules:function(){return Ue},parseSerializedPostIntoFlatModuleObject:function(){return W},performFindReplace:function(){return ke},quickDebouncedAddHistoryLayoutItem:function(){return ft},quickDebouncedMaybeRegenerateCarouselClones:function(){return _t},quickDebouncedMaybeUpdateUsedPresets:function(){return Et},registerEditPostStore:function(){return wn},removeColumn:function(){return Ve},removeGlobalModuleAttribute:function(){return Ge},removeGlobalParentAttribute:function(){return Be},removeGroupPresetAttribute:function(){return xe},removeModule:function(){return Fe},removeModuleAttribute:function(){return je},removeModuleAttributes:function(){return Ye},removeModuleStateProperties:function(){return $e},replaceModuleAttributes:function(){return We},resetFlexColumnStructure:function(){return ce},revertGlobalModuleEditState:function(){return He},setGlobalModuleAttribute:function(){return ze},setGlobalParentAttribute:function(){return qe},setLayoutState:function(){return Xe},setModuleLoopData:function(){return nt},setSpecialtySectionStatus:function(){return Je},syncGlobalLayoutAttributes:function(){return Qe},syncModuleGlobalColors:function(){return Ke},syncModuleInlineFont:function(){return Ze},updateUsedPresets:function(){return et}});var e={};n.r(e),n.d(e,{addColumnViaDivider:function(){return te},addFlexColumnViaDivider:function(){return ne},addGrid:function(){return oe},addModule:function(){return ie},addModuleGroup:function(){return ae},addRow:function(){return se},addSpecialtySection:function(){return ue},changeColumnStructure:function(){return le},changeColumnStructureForDragAndDrop:function(){return me},changeFlexColumnStructure:function(){return de},changeFlexColumnStructureForDragAndDrop:function(){return ge},changePricingTablesFlexColumnStructure:function(){return pe},clearLayout:function(){return fe},clearRemovedModules:function(){return Ie},cloneColumn:function(){return ye},cloneFlexColumn:function(){return Ee},cloneModule:function(){return _e},convertSelectedModulesToGroup:function(){return re},copyModule:function(){return he},copyModuleFromLibrary:function(){return ve},copyModuleFromPayload:function(){return Me},copyModulesFromPayload:function(){return be},disableGlobalModule:function(){return Oe},editChildren:function(){return Ae},editGroupPresetAttr:function(){return tt},editModuleAttribute:function(){return Te},editModuleProp:function(){return Ce},editUnsyncAttrs:function(){return Se},importContent:function(){return De},mergeGlobalModules:function(){return Le},moveModule:function(){return Re},moveModules:function(){return Ue},performFindReplace:function(){return ke},removeColumn:function(){return Ve},removeGlobalModuleAttribute:function(){return Ge},removeGlobalParentAttribute:function(){return Be},removeGroupPresetAttribute:function(){return xe},removeModule:function(){return Fe},removeModuleAttribute:function(){return je},removeModuleAttributes:function(){return Ye},removeModuleStateProperties:function(){return $e},replaceModuleAttributes:function(){return We},resetFlexColumnStructure:function(){return ce},revertGlobalModuleEditState:function(){return He},setGlobalModuleAttribute:function(){return ze},setGlobalParentAttribute:function(){return qe},setLayoutState:function(){return Xe},setModuleLoopData:function(){return nt},setSpecialtySectionStatus:function(){return Je},syncGlobalLayoutAttributes:function(){return Qe},syncModuleGlobalColors:function(){return Ke},syncModuleInlineFont:function(){return Ze},updateUsedPresets:function(){return et}});var t={};n.r(t),n.d(t,{__DEPRECATED__getModulesByIds:function(){return Zt},findModuleByInteractionTarget:function(){return Ln},getAncestorModules:function(){return xt},getAvailableLoopOptions:function(){return Yt},getChildModules:function(){return En},getCloudLayoutMetadata:function(){return yn},getContent:function(){return $t},getDescendantModulesByType:function(){return _n},getGlobalLayoutId:function(){return Wt},getGlobalLayoutOwners:function(){return Ht},getGroupPresetAttr:function(){return hn},getModule:function(){return zt},getModuleAttr:function(){return Xt},getModuleAttrs:function(){return Jt},getModuleCssVariables:function(){return Cn},getModuleLoopData:function(){return Dn},getModuleName:function(){return Qt},getModuleStructureIds:function(){return en},getModuleType:function(){return tn},getModuleWithChildren:function(){return nn},getModulesByIds:function(){return Kt},getParentModule:function(){return Ft},getParentModuleId:function(){return rn},getParentModuleType:function(){return on},getRootModuleIds:function(){return an},getSelectedModulePreset:function(){return Mn},getSelectedOptionGroupPreset:function(){return On},getSiblingModuleIds:function(){return sn},getSpecialtySectionStatus:function(){return un},getUsedPresets:function(){return ln},hasAncestorColumnType:function(){return Tn},hasResponsiveValues:function(){return cn},hasStickyState:function(){return pn},isCloneable:function(){return P},isContentEmpty:function(){return gn},isDisabled:function(){return mn},isNestedModule:function(){return An},isSectionOrInsideSection:function(){return fn},isStickyStateActive:function(){return In}});var o=n(33042),i=n.n(o),a=window.divi.data,s=window.divi.history,u=window.divi.middleware,l=window.divi.module,d=window.divi.moduleLibrary,c=window.divi.conversion;const p=(e,t,n,r="after")=>{const o=[...n],i="after"===r?n.indexOf(t)+1:n.indexOf(t);return o.splice(i,0,e),o};var m,g=window.lodash,f=new Uint8Array(16);function I(){if(!m&&!(m="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return m(f)}var y=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var E=function(e){return"string"==typeof e&&y.test(e)},_=[],h=0;h<256;++h)_.push((h+256).toString(16).substr(1));var v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(_[e[t+0]]+_[e[t+1]]+_[e[t+2]]+_[e[t+3]]+"-"+_[e[t+4]]+_[e[t+5]]+"-"+_[e[t+6]]+_[e[t+7]]+"-"+_[e[t+8]]+_[e[t+9]]+"-"+_[e[t+10]]+_[e[t+11]]+_[e[t+12]]+_[e[t+13]]+_[e[t+14]]+_[e[t+15]]).toLowerCase();if(!E(n))throw TypeError("Stringified UUID is invalid");return n};var M=function(e,t,n){var r=(e=e||{}).random||(e.rng||I)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return v(r)},b=window.vendor.wp.hooks;function O(e,t="expected a function, instead received "+typeof e){if("function"!=typeof e)throw new TypeError(t)}var A=e=>Array.isArray(e)?e:[e];function T(e){const t=Array.isArray(e[0])?e[0]:e;return function(e,t="expected all items to be functions, instead received the following types: "){if(!e.every((e=>"function"==typeof e))){const n=e.map((e=>"function"==typeof e?`function ${e.name||"unnamed"}()`:typeof e)).join(", ");throw new TypeError(`${t}[${n}]`)}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function C(e,t){const n=[],{length:r}=e;for(let o=0;o<r;o++)n.push(e[o].apply(null,t));return n}Symbol(),Object.getPrototypeOf({});var S="undefined"!=typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function D(e,t={}){let n={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:r}=t;let o,i=0;function a(){let t=n;const{length:a}=arguments;for(let e=0,n=a;e<n;e++){const n=arguments[e];if("function"==typeof n||"object"==typeof n&&null!==n){let e=t.o;null===e&&(t.o=e=new WeakMap);const r=e.get(n);void 0===r?(t={s:0,v:void 0,o:null,p:null},e.set(n,t)):t=r}else{let e=t.p;null===e&&(t.p=e=new Map);const r=e.get(n);void 0===r?(t={s:0,v:void 0,o:null,p:null},e.set(n,t)):t=r}}const s=t;let u;if(1===t.s?u=t.v:(u=e.apply(null,arguments),i++),s.s=1,r){const e=o?.deref?.()??o;null!=e&&r(e,u)&&(u=e,0!==i&&i--);o="object"==typeof u&&null!==u||"function"==typeof u?new S(u):u}return s.v=u,u}return a.clearCache=()=>{n={s:0,v:void 0,o:null,p:null},a.resetResultsCount()},a.resultsCount=()=>i,a.resetResultsCount=()=>{i=0},a}function L(e,...t){const n="function"==typeof e?{memoize:e,memoizeOptions:t}:e,r=(...e)=>{let t,r=0,o=0,i={},a=e.pop();"object"==typeof a&&(i=a,a=e.pop()),O(a,`createSelector expects an output function after the inputs, but received: [${typeof a}]`);const s={...n,...i},{memoize:u,memoizeOptions:l=[],argsMemoize:d=D,argsMemoizeOptions:c=[],devModeChecks:p={}}=s,m=A(l),g=A(c),f=T(e),I=u((function(){return r++,a.apply(null,arguments)}),...m);const y=d((function(){o++;const e=C(f,arguments);return t=I.apply(null,e),t}),...g);return Object.assign(y,{resultFunc:a,memoizedResultFunc:I,dependencies:f,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>t,recomputations:()=>r,resetRecomputations:()=>{r=0},memoize:u,argsMemoize:d})};return Object.assign(r,{withTypes:()=>r}),r}var R=L(D),U=Object.assign(((e,t=R)=>{!function(e,t="expected an object, instead received "+typeof e){if("object"!=typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);const n=Object.keys(e);return t(n.map((t=>e[t])),((...e)=>e.reduce(((e,t,r)=>(e[n[r]]=t,e)),{})))}),{withTypes:()=>U});const P=R([(e,t)=>t.moduleAppearance,(e,t)=>t.themeBuilderLayout,(e,t)=>{const{moduleAppearance:n,moduleName:r,themeBuilderLayout:o}=t,a=t?.moduleCount??i()({});let s=0;return t.moduleAppearance&&(s+=a.getIn([r,o]),"multipleAliases"in n&&(0,g.forEach)(n.multipleAliases,(e=>{s+=a.getIn([e,o])??0}))),s}],((e,t,n)=>{if(Boolean(e)){if("themeBuilderLayouts"in e&&!(0,g.includes)(e.themeBuilderLayouts,t))return!1;if("multiple"in e){if(!0===e.multiple)return!0;if(n>=("number"==typeof e.multiple?e.multiple:1))return!1}}return!0})),N=(e,t)=>{const{moduleId:n,targetParentId:r="",moduleAppearanceSettings:o={},themeBuilderLayout:a="postContent",moduleCount:s}=t,u=e.getIn(["content"]),l=r||u.getIn([n,"parent"]);let d,c=i()({});const p=(t,n)=>{(0,g.isEmpty)(t)||(0,g.forEach)(t,(t=>{const r=u.getIn([t]),i=M(),m=(0,b.applyFilters)("divi.cloneModule.attrs",r.asMutable({deep:!0})?.props?.attrs,{state:u.asMutable({deep:!0}),name:r?.name,id:i,parentId:l,sourceId:t}),f=o[r?.name];if(!P(e,{moduleName:r?.name,moduleAppearance:f,themeBuilderLayout:a,moduleCount:s}))return;const I={children:[],id:i,name:r?.name,parent:n,props:(0,g.isEmpty)(m)?r?.props:{...r?.props,attrs:m}};c=c.setIn([i],I);const y=c.getIn([n,"children","length"]);(0,g.isNumber)(y)?c=c.setIn([n,"children",`${y}`],i):d=i;const E=r.asMutable({deep:!0})?.children??[];p(E,i)}))};p([n],l);const m=u.getIn([l,"children"],i()([])),f=(0,g.findIndex)(m.asMutable(),(e=>e===n)),I=(0,g.slice)(m,0,f+1),y=(0,g.slice)(m,f+1);return{clonedModuleId:d,clonedParent:l,clonedParentChildren:[].concat(I,[d],y),clonedModules:c}},w=e=>{const t=(0,a.select)("divi/cloud-app").getUseCloudModuleType();return t.isAddRow?e.replace(/wp:divi\/row-inner /g,"wp:divi/row ").replace(/wp:divi\/column-inner /g,"wp:divi/column "):t.isAddRowInner?e.replace(/wp:divi\/row /g,"wp:divi/row-inner ").replace(/wp:divi\/column /g,"wp:divi/column-inner "):e};var k=n(53316),V=n.n(k);const G=e=>{const t=new Map;return{memoizeFunctionStore:t,memoized:V()(e,{cache:{create:()=>({has:e=>t.has(e),get:e=>t.get(e),set(e,n){t.set(e,n)}})},strategy:V().strategies.variadic}),clear:()=>t.clear()}},B=(e,t,n)=>{const r=i().asMutable(t,{deep:!0}),o=(0,g.pickBy)(r,(t=>(0,g.includes)(e,t.id)));return n?o:i()(o)},F=G(B),x=F.memoized,j=F.clear;var Y=window.vendor.wp.blockSerializationDefaultParser,$=window.vendor.wp.blocks;const W=(e,t,n=M)=>{const r=t||{children:[],name:"divi/root",id:"root",props:{attrs:{}}},o={[r.id]:{...r}},i=(e,t)=>{if(!e.blockName)return;if("divi/modules-styles"===e.blockName)return;let r,a;if("yes"===(0,g.get)(e,"attrs.nonconvertible")){const t=(0,Y.parse)((0,c.maybeConvertContent)(e.innerHTML.trim()))[0];r=t?.blockName,a=t?.attrs??{}}else r=e?.blockName,a=e?.attrs??{};const s=!(0,$.getBlockType)(r)||"divi/shortcode-module"===r,u=s?e?.innerHTML:null,l=n(),d={name:r,props:{attrs:a},id:l,parent:t,children:[]};s&&(d.props.innerHTML=u),o[l]=d,o[t].children.push(l),(0,g.isFunction)((0,g.get)(e,"innerBlocks.map"))&&(0,g.forEach)(e.innerBlocks,(e=>i(e,l)))},a=e.replace(/^(?:<!--\swp:divi\/placeholder\s-->)/g,"").replace(/(?:<!--\s\/wp:divi\/placeholder\s-->)$/g,""),s=(0,Y.parse)(a);return(0,g.forEach)(s,(e=>{i(e,r.id)})),o},H=e=>{if(!(0,g.isString)(e)||(0,g.isEmpty)(e))return[];const t=[],n=[(new DOMParser).parseFromString(e,"text/html").body];for(;n.length>0;){const e=n.pop(),{fontFamily:r}=e.style;if(r){const e=r.split(",").map((e=>e.trim().replace(/['"]/g,"")));t.push(...e)}n.push(...Array.from(e.children))}return(0,g.uniq)(t)},z=e=>{const{id:t,position:n,contentState:r}=e,o=r.getIn([t,"children"]);return o?.["first"===n?0:o.length-1]||""},q=e=>{const{action:t,contentState:n}=e,{id:r,position:o}=t,i={},a=n.getIn([r])?.parent,s="inside"===o?r:a;if("string"!=typeof s)return i;const u=n.getIn([s])?.children??[];let l="";switch(o){case"before":l=u?.[u?.indexOf(r)-1];break;case"after":l=u?.[u?.indexOf(r)+1];break;case"inside":l=u?.[u?.length-1]}if(!l)return i;const d=n.getIn([l,"name"]);return(n.getIn([l,"children"])??[]).forEach((e=>{const t=n.getIn([e])?.name;t&&(i[t]||(i[t]={moduleName:t,count:0}),i[t].count+=1)})),i[d]={moduleName:d,count:1},i},X=e=>{const{contentState:t}=e,n={};return(0,g.forEach)(t,(e=>{(0,g.isObject)(e)&&"divi/root"!==e?.name&&"divi/placeholder"!==e?.name&&"divi/global-layout"!==e?.name&&(n[e.name]||(n[e.name]={moduleName:e.name,count:0}),n[e.name].count++)})),n};var J=window.divi.moduleUtils;const Q=e=>{const{id:t,contentState:n}=e,r={},o=(0,J.populateContentTree)({tree:n,rootId:t});return(0,g.forEach)(o,(e=>{(0,g.isObject)(e)&&"divi/root"!==e?.name&&"divi/placeholder"!==e?.name&&(r[e.name]||(r[e.name]={moduleName:e.name,count:0}),r[e.name].count++)})),r},K=e=>{const{id:t,position:n,contentState:r}=e,o=r.getIn([t,"parent"]),i=r.getIn([o]);if(!i||!(0,g.isObject)(i))return"";const a=i?.children,s=a.indexOf(t),u=a?.["after"===n?s+1:s-1];return u||""},Z={content:"postContent",header:"header",body:"body",footer:"footer"},ee=(e,t)=>{const n=(0,a.select)("divi/settings").getSetting(["themeBuilder","layout"],"postContent"),r=t.getState();switch(e.type){case"ADD_COLUMN_VIA_DIVIDER":{const t=z({id:e?.id,position:"first",contentState:r.getIn(["content"])}),o=r.getIn(["content",t,"name"],"divi/column");(0,a.dispatch)("divi/module").increaseModuleCount({moduleName:o,layout:n});break}case"CONVERT_SELECTED_MODULES_TO_GROUP":(0,a.dispatch)("divi/module").increaseModuleCount({moduleName:"divi/group",layout:n});break;case"ADD_MODULE":(0,a.dispatch)("divi/module").increaseModuleCount({moduleName:e.name,layout:n});break;case"ADD_ROW":case"ADD_SPECIALTY_SECTION":(0,a.dispatch)("divi/module").setModuleCount({layout:n,operation:"increase",modules:q({action:e,contentState:r.getIn(["content"])})});break;case"CHANGE_COLUMN_STRUCTURE":{const{isStructureSame:t,operation:o,moduleCount:i}=(e=>{const{contentState:t,originStructure:n,targetStructure:r,id:o}=e,i=n.split(","),a=r.split(","),s=0==i.length-a.length;if(s)return{isStructureSame:s,operation:"increase",moduleCount:{}};const u=i.length<a.length?"increase":"decrease",l=Math.abs(i.length-a.length),d=z({id:o,position:"first",contentState:t}),c=t.getIn([d])?.name??"divi/column";return{isStructureSame:s,operation:u,moduleCount:{[c]:{moduleName:c,count:l}}}})({id:e.id,originStructure:e?.columnStructureOrigin??"",targetStructure:e?.columnStructure??"",contentState:r.getIn(["content"])});t||(0,a.dispatch)("divi/module").setModuleCount({layout:n,operation:o,modules:i});break}case"CLEAR_LAYOUT":(0,a.dispatch)("divi/module").clearModuleCount({layout:n});break;case"CLONE_MODULE":{const t=K({id:e?.params?.id,position:"after",contentState:r.getIn(["content"])});t&&(0,a.dispatch)("divi/module").setModuleCount({layout:n,operation:"increase",modules:Q({id:t,contentState:r.getIn(["content"])})});break}case"COPY_MODULE":case"COPY_MODULE_FROM_PAYLOAD":{const t=e?.params?.targetId,o="inside"===e?.params?.position?z({id:t,position:"last",contentState:r.getIn(["content"])}):K({id:t,position:"after",contentState:r.getIn(["content"])});o&&(0,a.dispatch)("divi/module").setModuleCount({layout:e?.params?.themeBuilderLayout??n,operation:"increase",modules:Q({id:o,contentState:r.getIn(["content"])})});break}case"COPY_MODULES_FROM_PAYLOAD":default:break;case"COPY_MODULE_FROM_LIBRARY":{const t=e?.targetId,o="inside"===e?.position?z({id:t,position:"last",contentState:r.getIn(["content"])}):K({id:t,position:"after",contentState:r.getIn(["content"])});o&&(0,a.dispatch)("divi/module").setModuleCount({layout:n,operation:"increase",modules:Q({id:o,contentState:r.getIn(["content"])})});break}case"IMPORT_CONTENT":"on"===e?.importOptionsValues?.replaceLayout?(0,a.dispatch)("divi/module").setModuleCount({layout:n,operation:"set",modules:X({contentState:r.getIn(["content"])})}):(0,a.dispatch)("divi/module").setModuleCount({layout:n,operation:"increase",modules:X({contentState:W((0,c.maybeConvertContent)(e?.content))})});break;case"MERGE_GLOBAL_MODULES":(0,a.dispatch)("divi/module").setModuleCount({layout:n,operation:"increase",modules:X({contentState:e?.content})});break;case"REMOVE_MODULE":case"REMOVE_COLUMN":(0,a.dispatch)("divi/module").setModuleCount({layout:n,operation:"decrease",modules:Q({id:e?.id,contentState:r.getIn(["content"])})});break;case"SET_LAYOUT_STATE":(0,a.dispatch)("divi/module").setModuleCount({layout:(o=e.location,Z[o]??o),operation:"set",modules:X({contentState:r.getIn(["content"])})})}var o},te=(e,t,n="user")=>({type:"ADD_COLUMN_VIA_DIVIDER",id:e,dividerPosition:t,caller:n}),ne=(e,t,n,r,o)=>({type:"ADD_FLEX_COLUMN_VIA_DIVIDER",rowId:e,columnId:t,position:n,builderVersion:r,caller:o}),re=e=>({type:"CONVERT_SELECTED_MODULES_TO_GROUP",selectedModuleIds:e}),oe=({id:e,position:t,template:n,isAddSection:r})=>({type:"ADD_GRID",id:e,position:t,template:n,isAddSection:r}),ie=(e,t,n={},r="inside",o="",i="user")=>({type:"ADD_MODULE",id:e,name:t,props:n,position:r,newId:o,caller:i}),ae=e=>({type:"ADD_MODULE_GROUP",id:e}),se=(e,t,n,r=!1,o="user")=>({type:"ADD_ROW",id:e,position:t,columnStructure:n,inner:r,caller:o}),ue=(e,t,n,r)=>({type:"ADD_SPECIALTY_SECTION",id:e,position:t,columnStructure:n,innerPosition:r}),le=(e,t,n="user")=>({type:"CHANGE_COLUMN_STRUCTURE",id:e,columnStructure:t,caller:n}),de=({id:e,value:t,breakpoint:n,state:r})=>({type:"CHANGE_FLEX_COLUMN_STRUCTURE",id:e,value:t,breakpoint:n,state:r}),ce=e=>({type:"RESET_FLEX_COLUMN_STRUCTURE",...e}),pe=({id:e,value:t,breakpoint:n,state:r})=>({type:"CHANGE_PRICING_TABLES_FLEX_COLUMN_STRUCTURE",id:e,value:t,breakpoint:n,state:r}),me=(e,t,n="user")=>({type:"CHANGE_COLUMN_STRUCTURE_FOR_DRAG_AND_DROP",sourceId:e,targetId:t,caller:n}),ge=({id:e,parentRowId:t,targetRowColumnStructure:n})=>({type:"CHANGE_FLEX_COLUMN_STRUCTURE_FOR_DRAG_AND_DROP",id:e,parentRowId:t,targetRowColumnStructure:n}),fe=()=>({type:"CLEAR_LAYOUT"}),Ie=e=>({type:"CLEAR_REMOVED_MODULES",params:e}),ye=e=>({type:"CLONE_COLUMN",params:e}),Ee=e=>({type:"CLONE_FLEX_COLUMN",params:e}),_e=(e,t)=>({type:"CLONE_MODULE",params:e,name:t}),he=e=>({type:"COPY_MODULE",params:e}),ve=(e,t,n,r="user")=>({type:"COPY_MODULE_FROM_LIBRARY",payload:e,position:t,targetId:n,caller:r}),Me=(e,t)=>({type:"COPY_MODULE_FROM_PAYLOAD",params:e,name:t}),be=e=>({type:"COPY_MODULES_FROM_PAYLOAD",params:e}),Oe=e=>({type:"DISABLE_GLOBAL_MODULE",id:e}),Ae=(e,t)=>({type:"EDIT_CHILDREN",id:e,children:t}),Te=({id:e,attrName:t,value:n,caller:r="user"})=>({type:"EDIT_MODULE_ATTRIBUTE",id:e,attrName:t,value:n,caller:r}),Ce=(e,t,n)=>({type:"EDIT_MODULE_PROP",id:e,propName:t,propValue:n}),Se=(e,t,n,r="user")=>({type:"EDIT_UNSYNC_ATTRS",id:e,attribute:t,isSynced:n,caller:r}),De=({content:e,presetIdsToReplace:t,defaultPresetAttrs:n,importOptionsValues:r,defaultImportedModulePresetIds:o,defaultImportedGroupPresetIds:i})=>({type:"IMPORT_CONTENT",content:e,presetIdsToReplace:t,defaultPresetAttrs:n,importOptionsValues:r,defaultImportedModulePresetIds:o,defaultImportedGroupPresetIds:i}),Le=(e,t)=>({type:"MERGE_GLOBAL_MODULES",content:e,owner:t}),Re=(e,t,n,r="user")=>({type:"MOVE_MODULE",id:e,position:t,targetId:n,caller:r}),Ue=(e,t,n)=>({type:"MOVE_MODULES",ids:e,position:t,targetId:n});var Pe=window.divi.clipboard;const Ne=(e,t,n)=>{if((0,g.isEqual)(e,t))return!0;if(n&&(0,J.isTransformScaleField)(n.fieldComponent.name,n.attrName,n.subName)){const n=(0,J.processPercentageValue)(e,J.convertPercentageToDecimal),r=(0,J.processPercentageValue)(t,J.convertPercentageToDecimal);return(0,g.isEqual)(n,r)}return!1},we=(e,t,n,r={})=>{const o=n&&(0,J.isTransformScaleField)(n.fieldComponent.name,n.attrName,n.subName)?(0,J.processPercentageValue)(t,J.formatAsPercentageString):t,a=(0,J.ensureImmutable)(o);function s(t){if(null==t)return t;if(r.restrictToPath&&r.onlyExactPaths)return(0,J.isImmutableObject)(t)&&"setIn"in t?function(t){const{restrictToPath:o}=r;if(!o)return t;const{attrName:i,subName:s,breakpoints:u,states:l}=o,d=i.split(".");let c=t,p=!1;return u.forEach((t=>{l.forEach((r=>{const o=(0,Pe.getFullAttrPath)({attrNamePath:d,breakpoint:t,state:r,subNamePath:s?s.split("."):[]}),i=(0,J.safeGetIn)(c,o);null!==i&&Ne(i,e,n)&&(c=c.setIn(o,a),p=!0)}))})),p?c:t}(t):t;if(Ne(t,e,n)){const e=((e,t,n)=>t&&n&&(!e||""===e||"string"==typeof e&&""===e.trim())?null:e)(o,n,t);if(null===e)return null;return(0,J.ensureImmutable)(e)}return function(e){if("object"!=typeof e)return e;if((0,J.isImmutableObject)(e)){const t=e.asMutable({deep:!0}),n=s(t);return n===t?e:n?i()(n):null}if(Array.isArray(e)){const t=[];let n=!1;return e.forEach(((e,r)=>{if((0,J.isValidModuleAttr)(e)){const o=s(e);null!==o?(t[r]=o,o!==e&&(n=!0)):n=!0}else t[r]=e})),n?t:e}if((0,J.isPlainObject)(e)){const t={};let n=!1;return Object.keys(e).forEach((r=>{const o=e[r],i=s(o);null!==i?(t[r]=i,i!==o&&(n=!0)):n=!0})),n?t:e}return e}(t)}return s},ke=e=>{const{sourceFieldInfo:t,selectedScope:n,selectedModuleTypes:r,findValue:o,replaceValue:i,onlyReplaceIdenticalFields:s,selectedSourceModule:u}=e;if(!t)return{type:"PERFORM_FIND_REPLACE_FAILED",error:"No source field"};if(!o&&0!==o&&!1!==o)return{type:"PERFORM_FIND_REPLACE_FAILED",error:"No find value"};const l=(0,a.select)("divi/settings").getEnabledBreakpointNames(),d=J.states,c=(0,J.getModulesInScope)(u,n,[],r,!0);if(0===c.length)return{type:"PERFORM_FIND_REPLACE_FAILED",error:"No modules found"};const{attrName:p,subName:m}=t,g=we(o,i,t,s?{restrictToPath:{attrName:p,subName:m,breakpoints:l,states:d},onlyExactPaths:!0}:{});let f=0;return c.forEach((e=>{try{const t=(0,a.select)("divi/edit-post").getModuleAttrs(e);if(!t)return;const n=g(t);n&&(0,J.isImmutableObject)(n)&&"setIn"in n&&n!==t&&((0,a.dispatch)("divi/edit-post").replaceModuleAttributes(e,n,"user",!0),f++)}catch(e){}})),{type:"PERFORM_FIND_REPLACE_SUCCESS",changesCount:f}},Ve=(e,t="user")=>({type:"REMOVE_COLUMN",id:e,caller:t}),Ge=e=>({type:"REMOVE_GLOBAL_MODULE_ATTRIBUTE",id:e}),Be=e=>({type:"REMOVE_GLOBAL_PARENT_ATTRIBUTE",id:e}),Fe=(e,t="user")=>({type:"REMOVE_MODULE",id:e,caller:t}),xe=(e,t,n,r="user")=>({type:"REMOVE_GROUP_PRESET_ATTRIBUTE",id:e,attrName:t,groupId:n,caller:r}),je=(e,t,n="user")=>({type:"REMOVE_MODULE_ATTRIBUTE",id:e,attrName:t,caller:n}),Ye=({id:e,attrNames:t,caller:n="user"})=>({type:"REMOVE_MODULE_ATTRIBUTES",id:e,attrNames:t,caller:n}),$e=e=>({type:"REMOVE_MODULE_STATE_PROPERTIES",params:e}),We=(e,t,n="user",r=!1)=>({type:"REPLACE_MODULE_ATTRIBUTES",id:e,attrs:t,caller:n,replaceAllAttrs:r}),He=({id:e,owner:t,caller:n="user"})=>({type:"REVERT_GLOBAL_MODULE_EDIT_STATE",id:e,owner:t,caller:n}),ze=(e,t)=>({type:"SET_GLOBAL_MODULE_ATTRIBUTE",id:e,value:t}),qe=(e,t)=>({type:"SET_GLOBAL_PARENT_ATTRIBUTE",id:e,value:t}),Xe=({location:e,layoutState:t})=>({type:"SET_LAYOUT_STATE",location:e,layoutState:t}),Je=e=>({type:"SET_SPECIALITY_SECTION_STATUS",status:e}),Qe=(e,t,n)=>({type:"SYNC_GLOBAL_LAYOUT_ATTRIBUTES",id:e,attrs:t,unsyncAttrs:n}),Ke=e=>({type:"SYNC_MODULE_GLOBAL_COLORS",globalColors:e}),Ze=()=>({type:"SYNC_MODULE_INLINE_FONT"}),et=({presetType:e,presets:t})=>({type:"UPDATE_USED_PRESETS",presetType:e,presets:t}),tt=({id:e,attrName:t,value:n})=>({type:"EDIT_GROUP_PRESET_ATTR",id:e,attrName:t,value:n}),nt=(e,t)=>({type:"SET_MODULE_LOOP_DATA",id:e,loopData:t});var rt=window.vendor.wp.i18n;const ot=(e,t)=>{const n={ADD_COLUMN_VIA_DIVIDER:(0,rt.__)("Added Column","et_builder"),ADD_FLEX_COLUMN_VIA_DIVIDER:(0,rt.__)("Added Flex Column","et_builder"),ADD_MODULE:(0,rt.__)("Added %s","et_builder"),ADD_ROW:(0,rt.__)("Added Row","et_builder"),ADD_GRID:(0,rt.__)("Added Flex Grid","et_builder"),ADD_SPECIALTY_SECTION:(0,rt.__)("Added Specialty Section","et_builder"),CHANGE_COLUMN_STRUCTURE:(0,rt.__)("Changed Column Structure","et_builder"),CHANGE_FLEX_COLUMN_STRUCTURE:(0,rt.__)("Changed Flex Column Structure","et_builder"),CLEAR_LAYOUT:(0,rt.__)("Cleared Layout","et_builder"),CLONE_MODULE:(0,rt.__)("Cloned %s","et_builder"),CLONE_COLUMN:(0,rt.__)("Cloned Column","et_builder"),CONVERT_SELECTED_MODULES_TO_GROUP:(0,rt.__)("Created Group","et_builder"),COPY_MODULE_FROM_PAYLOAD:(0,rt.__)("Copied %s","et_builder"),COPY_MODULES_FROM_PAYLOAD:(0,rt.__)("Copied Modules","et_builder"),EDIT_CHILDREN:(0,rt.__)("Edited %s Child Modules","et_builder"),EDIT_MODULE_ATTRIBUTE:(0,rt.__)("Edited %s","et_builder"),EDIT_MODULE_PROP:(0,rt.__)("Edited %s","et_builder"),EDIT_UNSYNC_ATTRS:(0,rt.__)("Edited Unsynced Attributes","et_builder"),IMPORT_CONTENT:(0,rt.__)("Imported Content","et_builder"),MOVE_MODULE:(0,rt.__)("Moved %s","et_builder"),MOVE_MODULES:(0,rt.__)("Moved Modules","et_builder"),REMOVE_COLUMN:(0,rt.__)("Removed Column","et_builder"),REMOVE_MODULE:(0,rt.__)("Removed %s","et_builder"),REMOVE_MODULE_ATTRIBUTE:(0,rt.__)("Removed Module Attribute","et_builder"),REPLACE_MODULE_ATTRIBUTES:(0,rt.__)("Replaced Module Attributes","et_builder")},r=t.getState()?.getIn(["content"]),o=e?.type??"",i="id"in e?e.id:"",s="name"in e?e.name:r?.[i]?.name??"",u=(0,a.select)("divi/module-library").getModule(s)?.title??"";let l=n?.[o];l?.includes("%s")&&(l=(0,rt.sprintf)(l,u));const d=new Date,c=d.getTime(),p=d.toLocaleTimeString();(0,a.dispatch)("divi/history").addLayoutItem({label:l,moduleId:i,moduleLabel:u,moduleName:s,state:r,timestamp:c,humanTime:p,type:o,storeName:"divi/edit-post"})},it=(e,t)=>{let n=(0,g.get)(e,"id");const r={label:(0,g.get)(t.getState(),["content",n,"name"]),details:""};if("EDIT_MODULE_ATTRIBUTE"===e.type){const t=(0,g.isString)(e.value)?e.value:JSON.stringify(e.value);r.details=`${e.attrName}: ${t}`}"CONVERT_SELECTED_MODULES_TO_GROUP"===e.type&&(r.label="divi/group",n=(0,g.get)(t.getState(),["content",e.selectedModuleIds[0],"parent"],"")),(0,a.dispatch)("divi/history").add("edit-post",e.type,n,r)},at=e=>{const t=(0,a.select)("divi/edit-post").getModuleWithChildren(e.id),n=Object.values(t).find((e=>!!(0,a.select)("divi/modal-library").isModuleEdited(e.id))),r=e.id===n?.id,o=!r&&void 0!==n,i=(0,a.select)("divi/edit-post").getParentModuleId(e.id);if(r||o){const e="divi/shortcode-module"===(0,a.select)("divi/edit-post").getModuleName(i)?"divi/module-shortcode":"divi/module";"root"===i?(0,a.dispatch)("divi/modal-library").open({name:"divi/page-settings"}):(0,a.dispatch)("divi/modal-library").open({name:e,owner:i})}};let st=null;const ut=(0,g.debounce)(((e,t)=>((e,t)=>{"object"==typeof window.ET_Builder&&requestAnimationFrame((()=>{e.forEach((e=>{try{const n=document.querySelector(`[data-id="${e}"]`);if(n?.classList.contains("et_pb_group_carousel_initialized")){const r=new CustomEvent("divi:groupCarousel:regenerateClones",{detail:{carouselId:e,moduleId:t},bubbles:!1,cancelable:!1});n.dispatchEvent(r)}}catch(e){}}))}))})(e,t)),300),lt=e=>{if("caller"in e&&"global-layout"===e.caller)return;const t=[];let n="";const r=e=>(0,a.select)("divi/edit-post").getGlobalLayoutId(e),o=(0,a.select)("divi/module").getModuleCount();switch(e.type){case"ADD_COLUMN_VIA_DIVIDER":{const{id:o}=e;r(o)&&(n=o,t.push(r(o)));break}case"ADD_MODULE":{const{id:o,name:i}=e;if("root"===o)return;const s=(0,a.select)("divi/edit-post").getParentModule(o).id,u=(0,a.select)("divi/module-library").isChildModule(i)?(0,a.select)("divi/edit-post").getParentModule(s).id:(0,a.select)("divi/edit-post").getParentModule(o).id;r(u)&&!(0,a.select)("divi/module-library").isChildModule(i)&&(n=u,t.push(r(u)));break}case"ADD_ROW":{const{id:o}=e;r(o)&&(n=o,t.push(r(o)));break}case"CHANGE_COLUMN_STRUCTURE":{const{id:o}=e;r(o)&&(n=o,t.push(r(o)));break}case"CLONE_MODULE":{const{id:o}=e.params;r(o)&&(n=o,t.push(r(o)));break}case"COPY_MODULE_FROM_PAYLOAD":{const{targetId:o}=e.params;r(o)&&(n=o,t.push(r(o)));break}case"COPY_MODULES_FROM_PAYLOAD":{const{targetId:o}=e.params;r(o)&&(n=o,t.push(r(o)));break}case"EDIT_MODULE_ATTRIBUTE":{const{id:o}=e;r(o)&&(n=o,t.push(r(o)));break}case"EDIT_UNSYNC_ATTRS":{const{id:o}=e;r(o)&&(n=o,t.push(r(o)));break}case"MOVE_MODULE":{const{id:o,targetId:i}=e;r(o)&&(n=o,t.push(r(o))),r(i)&&(n=i,t.push(r(i)));break}case"MOVE_MODULES":{const{ids:o,targetId:i}=e;o.forEach((e=>{r(e)&&(n=e,t.push(r(e)))})),r(i)&&(n=i,t.push(r(i)));break}case"REMOVE_COLUMN":{const{id:o}=e;r(o)&&(n=o,t.push(r(o)));break}case"REMOVE_MODULE":{const{id:o}=e;r(o)&&(n=o,t.push(r(o)));break}case"REMOVE_MODULE_ATTRIBUTE":{const{id:o}=e;r(o)&&(n=o,t.push(r(o)));break}case"REPLACE_MODULE_ATTRIBUTES":{const{id:o}=e;r(o)&&(n=o,t.push(r(o)));break}default:return}(0,g.forEach)(t,(t=>{const i=[];let s="",u="",l="",d="";const c={addColumnViaDivider:()=>"ADD_COLUMN_VIA_DIVIDER"===e.type&&(0,a.dispatch)("divi/edit-post").addColumnViaDivider(d,e.dividerPosition,"global-layout"),addModule:()=>"ADD_MODULE"===e.type&&(0,a.dispatch)("divi/edit-post").addModule(d,e.name,e.props,e.position,e.newId,"global-layout"),addRow:()=>"ADD_ROW"===e.type&&(0,a.dispatch)("divi/edit-post").addRow(d,e.position,e.columnStructure,e.inner,"global-layout"),changeColumnStructure:()=>"CHANGE_COLUMN_STRUCTURE"===e.type&&(0,a.dispatch)("divi/edit-post").changeColumnStructure(d,e.columnStructure,"global-layout"),cloneModule:()=>"CLONE_MODULE"===e.type&&(0,a.dispatch)("divi/edit-post").cloneModule({id:d,caller:"global-layout",moduleCount:o}),copyModuleFromPayload:()=>"COPY_MODULE_FROM_PAYLOAD"===e.type&&(0,a.dispatch)("divi/edit-post").copyModuleFromPayload({payload:e.params.payload,position:e.params.position,targetId:d,caller:"global-layout",moduleCount:o}),copyModulesFromPayload:()=>"COPY_MODULES_FROM_PAYLOAD"===e.type&&(0,a.dispatch)("divi/edit-post").copyModulesFromPayload({payload:e.params.payload,position:e.params.position,targetId:d,caller:"global-layout",moduleCount:o}),editModuleAttribute:()=>{if("EDIT_MODULE_ATTRIBUTE"===e.type){const t=(0,a.select)("divi/edit-post").getModuleAttr(s,"unsyncAttrs");!(!("attrName"in e)||!Array.isArray(t))&&t.some((t=>t.attrName===e.attrName))||(0,a.dispatch)("divi/edit-post").editModuleAttribute({id:d,attrName:e.attrName,value:e.value,caller:"global-layout"})}},moveModule:()=>"MOVE_MODULE"===e.type&&(0,a.dispatch)("divi/edit-post").moveModule(u,e.position,l,"global-layout"),removeColumn:()=>"REMOVE_COLUMN"===e.type&&(0,a.dispatch)("divi/edit-post").removeColumn(d,"global-layout"),removeModule:()=>"REMOVE_MODULE"===e.type&&(0,a.dispatch)("divi/edit-post").removeModule(d,"global-layout"),removeModuleAttribute:()=>"REMOVE_MODULE_ATTRIBUTE"===e.type&&(0,a.dispatch)("divi/edit-post").removeModuleAttribute(d,e.attrName,"global-layout"),replaceModuleAttributes:()=>"REPLACE_MODULE_ATTRIBUTES"===e.type&&(0,a.dispatch)("divi/edit-post").replaceModuleAttributes(d,e.attrs,"global-layout"),editUnsyncAttrs:()=>{if("EDIT_UNSYNC_ATTRS"===e.type&&!1===e.isSynced){const e=(0,a.select)("divi/edit-post").getModuleAttrs(s),t=(0,a.select)("divi/edit-post").getModuleAttr(d,"unsyncAttrs")||[];(0,a.dispatch)("divi/edit-post").syncGlobalLayoutAttributes(d,e,t)}}},p=(0,g.camelCase)(e.type),m="EDIT_MODULE_ATTRIBUTE"!==e.type,f=(0,a.select)("divi/edit-post").getGlobalLayoutOwners(t);(0,g.forEach)(f,(e=>{(0,a.select)("divi/modal-library").isModuleEdited(e)||((e,t)=>{let n=!1;const r=(e,t)=>{const o=(0,a.select)("divi/edit-post").getParentModule(t).id;o&&o===e?n=!0:o&&"root"!==o&&r(e,o)};return r(e,t),n})(e,n)||e===n?s=e:i.push(e)}));const I=(0,a.select)("divi/global-layouts").getGlobalLayoutMap(t),y=(n,i,f=!1)=>{if("moveModule"!==p&&(!["cloneModule","removeModule","addRow","copyModuleFromPayload","copyModulesFromPayload"].includes(p)||!f)&&("id"in e&&n===e.id||"targetId"in e&&n===e.targetId)){d=i,c[p]();const n=(0,a.select)("divi/edit-post").getModuleAttr(s,"unsyncAttrs");if(!(!(!("attrName"in e)||!Array.isArray(n))&&n.some((t=>t.attrName===e.attrName)))){const e=(0,a.select)("divi/edit-post").getModuleWithChildren(s);(0,a.dispatch)("divi/global-layouts").setLayoutContent(t,e,s,m)}return}const E=I.filter((e=>n in e))?.[0]?.[n]?.children;Array.isArray(E)&&E.length&&(0,g.forEach)(E,((t,n)=>{const s=I.filter((e=>i in e))[0];if(!s)return;const d=s[i]?.children;if("MOVE_MODULE"===e.type){if(t===e.id&&(u=d[n]),t===e.targetId&&(l=d[n],!r(e.id)))return void(0,a.dispatch)("divi/edit-post").copyModule({id:e.id,position:e.position,targetId:l,moduleCount:o});if(!f&&""!==u&&""!==l)return void c[p]()}y(t,d[n],!1)}))};(0,g.forEach)(i,(e=>{y(s,e,!0)}));const E=(0,a.select)("divi/edit-post").getModuleAttr(s,"unsyncAttrs");if(!(!(!("attrName"in e)||!Array.isArray(E))&&E.some((t=>t.attrName===e.attrName)))){const e=(0,a.select)("divi/edit-post").getModuleWithChildren(s);(0,a.dispatch)("divi/global-layouts").setLayoutContent(t,e,s,m)}}))},dt=(e,t)=>{const n=(0,g.get)(t.getState()?.asMutable({deep:!0}),"content"),r=(0,J.populateUsedGroupPresets)(n);(0,a.dispatch)("divi/edit-post").updateUsedPresets({presetType:"group",presets:r})},ct=(e,t)=>{if("EDIT_MODULE_ATTRIBUTE"===e.type&&"modulePreset"!==e?.attrName)return;const n=(0,g.get)(t.getState()?.asMutable({deep:!0}),"content"),r=(0,J.populateUsedPresets)(n),o=(0,J.populateUsedGroupPresets)(n);(0,a.dispatch)("divi/edit-post").updateUsedPresets({presetType:"module",presets:r}),(0,a.dispatch)("divi/edit-post").updateUsedPresets({presetType:"group",presets:o})};var pt=window.jQuery,mt=n.n(pt);const gt=(e,t="")=>{let n=0;const r=setInterval((()=>{const o="wireframe"===(0,a.select)("divi/app-ui").getView(),i=mt()(`${o?".et-vb-wireframe":"divi/section"===t?".et_pb_section":"divi/row"===t||"divi/row-inner"===t?".et_pb_row":"divi/column"===t||"divi/column-inner"===t?".et_pb_column":"divi/group"===t?".et_pb_group":".et_pb_module"}[data-id="${e}"] .et-vb-add-module`);(i.length||n>1e3)&&(clearInterval(r),(0,J.openAddModuleModal)(i,e,!0)),n+=5}),5)},ft=(0,g.debounce)(ot,300),It=(0,g.debounce)(ot,500),yt=(e,t)=>{!("caller"in e)||"history"!==e.caller&&"global-layout"!==e.caller?It(e,t):ot(e,t)},Et=(0,g.debounce)(ct,300),_t=(0,g.debounce)(((e,t)=>{const n=t.getState().getIn(["content"]);if(!n)return;["ADD_MODULE","REMOVE_MODULE"].includes(e.type)&&(st=null);const r=(e=>"id"in e&&e.id?e.id:"ids"in e&&Array.isArray(e.ids)&&e.ids.length>0?e.ids[0]:null)(e);if(!r)return;if(null===st&&(st=(e=>Object.keys(e.asMutable({deep:!1})).some((t=>"divi/group-carousel"===e.getIn([t])?.getIn(["name"],""))))(n)),!1===st)return;if("EDIT_MODULE_ATTRIBUTE"===e.type){if("caller"in e&&"history"===e.caller)return;if("attrName"in e&&"string"==typeof e.attrName&&!e.attrName.includes("innerContent"))return}const o=((e,t,n)=>{const r=[];let o;return(0,a.select)("divi/edit-post").getAncestorModules(e,"bottom-to-top").forEach((e=>{const i=t.getIn([e.id]);if(!i)return;const a=i.getIn(["name"],"");if("divi/group-carousel"===a&&r.push(e.id),"REMOVE_MODULE"===n&&"divi/group"===a&&!o){const n=i.getIn(["parent"],""),r=t.getIn([n])?.getIn(["name"],"");"divi/group-carousel"===r&&(o=e.id)}})),{affectedCarousels:r,slideGroupId:o}})(r,n,e.type);if(0===o.affectedCarousels.length)return;const i=o.slideGroupId||r;ut(o.affectedCarousels,i)}),300),ht={ADD_COLUMN_VIA_DIVIDER:[lt,Et,ee,it,ot],ADD_FLEX_COLUMN_VIA_DIVIDER:[lt,Et,ee,it,ot],ADD_MODULE:[(e,t)=>{const n=(0,g.get)(e,"name"),r=(0,g.get)(e,"position");if("divi/section"===n&&"after"===r){const r=(0,g.get)(e,"id"),o=(0,g.get)(t.getState(),"content").getIn(["root","children"]),i=o.indexOf(r),a=o[i+1];gt(a,n)}},(e,t)=>{const n=(0,g.get)(e,"name"),r=(0,a.select)("divi/module-library").getModuleCategory(n);if(!(0,g.includes)(["module","fullwidth-module"],r))return;const o=(0,a.select)("divi/module-library").getChildModules({moduleName:n});if((0,g.isEmpty)(o))return;const i=(0,a.select)("divi/app-preferences").get(["module","dummyContent"]),s=(0,g.get)(t.getState(),"content"),u=(0,g.get)(e,"id"),l=(0,g.get)(e,"position"),d="inside"===l?u:(0,g.get)(s,[u,"parent"]),c=s.getIn([d,"children"],[]).asMutable(),p="inside"===l?(0,g.last)(c):c[c.indexOf(u)+("before"===l?-1:1)],m=(0,a.select)("divi/module-library").getModule(n);m.template&&m.template.forEach((e=>{const t=e[0],r=(0,g.isString)(e[1])?{}:e[1],o=(0,a.select)("divi/module-library").getModule(t),s=(0,a.select)("divi/settings").getSetting(["builderVersion"]),u=i&&o?.placeholderContent?o?.placeholderContent:{};if((0,g.includes)(o.parentsName,n)||"divi/group-carousel"===n&&"divi/group"===t){const e={attrs:(0,g.merge)({},u,r,{builderVersion:s})};(0,a.dispatch)("divi/edit-post").addModule(p,t,e,"inside")}}))},lt,ct,_t,ee,it,ft],ADD_MODULE_GROUP:[e=>{gt(e.id,"divi/group")}],ADD_ROW:[(e,t)=>{const n=(0,g.get)(t.getState(),"content"),r=(0,g.get)(e,"id"),o=(0,g.get)(e,"position"),i="inside"===o?r:(0,g.get)(n,[r,"parent"]),a=n.getIn([i,"children"],[]).asMutable(),s="inside"===o?(0,g.last)(a):a[a.indexOf(r)+("before"===o?-1:1)],u=(0,g.get)(n,s),l=(0,g.head)((0,g.get)(u,"children")),d="divi/row-inner"===(0,g.get)(n,[s,"name"])?"divi/column-inner":"divi/column";gt(l,d)},lt,Et,ee,it,ot],ADD_GRID:[(e,t)=>{const{id:n,position:r,isAddSection:o}=e,i=(0,g.get)(t.getState(),"content");if(o&&"after"===r){const e=i.getIn(["root","children"]),t=e[e.indexOf(n)+1],r=(0,g.head)((0,g.get)(i,[t,"children"])),o=(0,g.head)((0,g.get)(i,[r,"children"]));return void(o&&gt(o,"divi/column"))}const a="inside"===r?n:(0,g.get)(i,[n,"parent"]),s=i.getIn([a,"children"],[]).asMutable(),u="inside"===r?(0,g.last)(s):s[s.indexOf(n)+("before"===r?-1:1)],l=(0,g.head)((0,g.get)(i,[u,"children"])),d="divi/row-inner"===(0,g.get)(i,[u,"name"])?"divi/column-inner":"divi/column";if(l){const e=(0,g.get)(i,u),t=(0,g.get)(e,["props","attrs","module","advanced","flexColumnStructure","desktop","value"],"");if("string"==typeof t&&t.startsWith("multi-column-grids_")){const e=(0,g.get)(i,l),t=(0,g.get)(e,"children",[]),n=(0,g.head)(t);if(n){const e=(0,g.get)(i,n),t=(0,g.get)(e,"children",[]),r=(0,g.head)(t);r?gt(r,"divi/column"):gt(n,"divi/row")}else gt(l,d)}else gt(l,d)}},(e,t)=>{const{id:n,position:r,isAddSection:o}=e,i=t.getState()?.content;let s=null;if(o&&"after"===r){const e=i?.getIn(["root","children"])?.asMutable();if(e&&Array.isArray(e)){const t=e.indexOf(n);if(-1!==t){const n=t+1;if(n<e.length){const t=e[n];if("string"==typeof t){const e=(0,g.head)((0,g.get)(i,[t,"children"]));e&&(s=e)}}}}}else if(!o){const e="inside"===r?n:(0,g.get)(i,[n,"parent"]),t=i?.getIn([e,"children"]),o=t?.asMutable?t.asMutable():null;if(o&&Array.isArray(o)){const e="inside"===r?(0,g.last)(o):(()=>{const e=o.indexOf(n);if(-1===e)return null;const t=e+("before"===r?-1:1);return t<0||t>=o.length?null:o[t]})();e&&(s=e)}}s&&(0,a.dispatch)("divi/modal-library").open({name:"divi/module",owner:s})},lt,Et,ee,it,ot],ADD_SPECIALTY_SECTION:[(e,t)=>{const n=(0,g.get)(e,["innerPosition"]).split(",").indexOf("1"),r=(0,g.get)(e,"id"),o=(0,g.get)(t.getState(),"content"),i=o.getIn(["root","children"]),a=i.indexOf(r),s=i["after"===(0,g.get)(e,"position")?a+1:a-1],u=o.getIn([s,"children"])[n];gt(u,"divi/column")},ee,it,ot],CHANGE_COLUMN_STRUCTURE:[lt,Et,_t,ee,it,ot],CHANGE_FLEX_COLUMN_STRUCTURE:[lt,Et,_t,ee,it,ot],CLEAR_LAYOUT:[(e,t)=>{const n=(0,g.get)(t.getState(),"content").getIn(["root","children",0]);gt(n,"divi/section")},Et,ee,ot],CLONE_MODULE:[lt,Et,_t,ee,ot],CLONE_COLUMN:[ee,it,ot,_t],CLONE_FLEX_COLUMN:[ee,it,ot,_t],CONVERT_SELECTED_MODULES_TO_GROUP:[(e,t)=>{const n=t.getState().content,{selectedModuleIds:r}=e,o=(0,g.get)(n,[r[0],"parent"],"");(0,a.dispatch)("divi/modal-library").open({name:"divi/module",owner:o})},ee,it,ft],COPY_MODULE:[lt,Et,ee,it],COPY_MODULE_FROM_PAYLOAD:[lt,Et,ee,it,ot],COPY_MODULES_FROM_PAYLOAD:[lt,Et,ee,it,ot],COPY_MODULE_FROM_LIBRARY:[ct,ee],EDIT_CHILDREN:[ft],EDIT_MODULE_ATTRIBUTE:[lt,ct,_t,it,yt,(e,t)=>{if("EDIT_MODULE_ATTRIBUTE"!==e.type)return;if("module.decoration.layout"!==e.attrName)return;if("block"!==(0,g.get)(e.value,["desktop","value","display"]))return;const n=(0,g.get)(t.getState(),["content"]),r=e.id,o=n.getIn([r,"name"]);if("divi/row"!==o&&"divi/row-inner"!==o)return;const i=n.getIn([r,"children"],[]),s=Array.isArray(i)?i.length:i?.asMutable?.()?.length??0;if(0===s)return;const u=Math.min(s,6),l=1===u?"4_4":Array(u).fill(`1_${u}`).join(",");(0,a.dispatch)("divi/edit-post").changeColumnStructure(r,l)}],EDIT_MODULE_PROP:[lt,ct,it,yt],EDIT_UNSYNC_ATTRS:[lt,Et,it,ot],IMPORT_CONTENT:[Et,ee,ot],MERGE_GLOBAL_MODULES:[ct,ee],MOVE_MODULE:[lt,Et,_t,it,ot,(e,t)=>{const{draggedModuleParentId:n,targetParentId:r,id:o}=e;if(n===r)return;const i=(0,g.get)(t.getState(),["content"]),s=i.getIn([o,"name"]);if("divi/column"!==s&&"divi/column-inner"!==s)return;const u=i.getIn([r,"props","attrs","module","advanced","columnStructure","desktop","value"],"").split(",").length??0,l="block"!==i.getIn([r,"props","attrs","module","decoration","layout","desktop","value","display"],""),d="block"!==i.getIn([n,"props","attrs","module","decoration","layout","desktop","value","display"],"");if(u>={"divi/column":6,"divi/column-inner":3}[s]&&!l)return c=(0,rt.__)("This number of columns cannot be used on this row.","et_builder"),void(0,g.get)(window,"alert",g.noop)(c);var c;l||d?(0,a.dispatch)("divi/edit-post").changeFlexColumnStructureForDragAndDrop({id:o,parentRowId:r,targetRowColumnStructure:l?"flex":"block"}):(0,a.dispatch)("divi/edit-post").changeColumnStructureForDragAndDrop(n,r)}],MOVE_MODULES:[lt,Et,_t,it,ot],REMOVE_COLUMN:[lt,Et,_t,it,at,ee,ot],REMOVE_MODULE:[lt,Et,_t,it,at,ee,ot],REMOVE_MODULE_ATTRIBUTE:[lt,Et,_t,it,ot],REMOVE_GROUP_PRESET_ATTRIBUTE:[dt],REPLACE_MODULE_ATTRIBUTES:[lt,Et,_t,it,ot],SET_LAYOUT_STATE:[Et,ee],SYNC_GLOBAL_MODULE_ATTRIBUTES:[it],SYNC_MODULE_GLOBAL_COLORS:[(e,t)=>{const n=t.getState().content,r=JSON.stringify({...n}),o=new RegExp('"var[(]--(?:gcid-([0-9a-z-]*))[)]"',"gi"),i=(0,g.uniq)(Array.from(r.matchAll(o)).map((e=>e[1])));if(i.length>0){const e=Number((0,a.select)("divi/settings").getSetting(["post","id"]));e&&(0,a.dispatch)("divi/global-data").updateGlobalColorsUsedInPosts(e,i)}},it],EDIT_GROUP_PRESET_ATTR:[dt]},vt=()=>e=>t=>{const n=(0,a.select)("divi/modal-library").getModalOwner("divi/module"),r=(0,a.select)("divi/edit-post").getGlobalLayoutId(n),o=(0,a.select)("divi/global-layouts").getLayout(r)?.preEditContent;if(!!r&&!!o)return(0,a.dispatch)("divi/global-layouts").openConfirmationPopup({id:r}),null;return e(t)},Mt=()=>e=>t=>{if(["CLEAR_LAYOUT","ADD_ROW","MOVE_MODULES","ADD_GRID","CHANGE_COLUMN_STRUCTURE","ADD_COLUMN_VIA_DIVIDER","ADD_FLEX_COLUMN_VIA_DIVIDER","REMOVE_MODULE"].includes(t.type)){const e=(0,a.select)("divi/settings").getSetting(["builderVersion"]);t={...t,builderVersion:e}}return e(t)},bt={ADD_COLUMN_VIA_DIVIDER:[vt,Mt],ADD_MODULE:[vt],ADD_ROW:[vt,Mt],ADD_SPECIALTY_SECTION:[vt],ADD_FLEX_COLUMN_VIA_DIVIDER:[vt,Mt],CHANGE_COLUMN_STRUCTURE:[()=>e=>t=>{const n=(0,a.select)("divi/edit-post").getContent().getIn([t.id])?.props?.attrs?.module?.advanced?.columnStructure?.desktop?.value??"";t.columnStructureOrigin=n;return e(t)},vt,Mt],CLEAR_LAYOUT:[vt,Mt],ADD_GRID:[Mt],CLONE_MODULE:[vt],CLONE_COLUMN:[vt],COPY_MODULE:[vt],COPY_MODULE_FROM_LIBRARY:[vt],COPY_MODULE_FROM_PAYLOAD:[vt],COPY_MODULES_FROM_PAYLOAD:[vt],DISABLE_GLOBAL_MODULE:[vt],EDIT_MODULE_ATTRIBUTE:[()=>e=>t=>{if((0,a.select)("divi/global-data").isActivePreset()||"modulePreset"===t.attrName){return e(t)}const n=t.id,r=(0,a.select)("divi/edit-post").getGlobalLayoutId(n);if(!!!r){return e(t)}const o=t.attrName,i=(0,a.select)("divi/global-layouts").getLayout(r)?.preEditContent,s=!!i,u=(0,a.select)("divi/edit-post").getModuleAttrs(n),l=(0,a.select)("divi/edit-post").getModuleAttr(n,o),d=(0,g.isEqual)((0,g.cloneDeep)(t.value),(0,g.cloneDeep)(l));s||d||((0,a.dispatch)("divi/history").disableHistoryTracking(),(0,a.dispatch)("divi/global-layouts").setPreEditContent({id:r,content:u}));return e(t)},()=>e=>t=>{(0,a.select)("divi/global-data").isActivePreset()&&(0,a.dispatch)("divi/global-data").closePresetModal();return e(t)}],IMPORT_CONTENT:[vt],MOVE_MODULE:[vt,()=>e=>t=>{const n=(0,a.select)("divi/edit-post").getContent(),r=n.getIn([t.id,"parent"]),o="inside"===t.position?t.targetId:n.getIn([t.targetId,"parent"]);t.draggedModuleParentId=r,t.targetParentId=o;return e(t)}],MOVE_MODULES:[vt,Mt],REMOVE_MODULE:[vt,Mt],REMOVE_COLUMN:[vt],REVERT_GLOBAL_MODULE_EDIT_STATE:[()=>e=>t=>{const{owner:n}=t,r=t.id,o=(0,a.select)("divi/global-layouts").getLayout(r)?.preEditContent?.asMutable(),i=(0,g.omit)(o,["globalModule","unsyncAttrs","modulePreset"]);(0,g.forEach)(i,((e,t)=>{(0,a.dispatch)("divi/edit-post").editModuleAttribute({id:n,attrName:t,value:e})})),(0,a.dispatch)("divi/global-layouts").deletePreEditContent({id:r}),(0,a.dispatch)("divi/history").enableHistoryTracking();return e(t)}]},Ot=(e,t,n,r,o="after",i="")=>{const a=e.getIn([t,"parent"],""),s="inside"===o?t:a,u=i||M(),l=e.getIn([a,"props","attrs","globalModule"],!1),d=e.getIn([a,"props","attrs","globalParent"],!1),c=l||d||!1,m=(0,b.applyFilters)("divi.addModule.attrs",r?.attrs,{state:e.asMutable({deep:!0}),name:n,id:u,parentId:s}),f={id:u,children:[],name:n,parent:s,props:(0,g.isEmpty)(m)?r:{...r,attrs:{...m}}},I=e.getIn([s,"children"],[]),y="inside"===o?(0,g.isArray)(I)?[...I,f.id]:[f.id]:p(f.id,t,I.asMutable(),o);return e=e.merge({[f.id]:f}).setIn([s,"children"],y),c?e.setIn([f.id,"props","attrs","globalParent"],c):e},At=(e,t,n,r="postContent")=>{const o=e.getIn(["content"]),i=o.getIn([t],{});if((0,g.isEmpty)(i))return e;const a=i.getIn(["parent"]),s=o.getIn([a,"children"],[]).asMutable(),u=s.indexOf(t);if(u<0)return e;const l=[...s];if(l.splice(u,1),"root"===a&&0===l.length){const t=M(),r=o.setIn([a,"children"],[t]).setIn([t],{id:t,name:"divi/section",children:[],parent:"root",props:{attrs:{builderVersion:n}}});return e.setIn(["content"],r)}const d=o.setIn([a,"children"],l),c=((e,t)=>{const n=t.getIn(["content"]),r=n.getIn([e]);if(!r)return t;const o=r.getIn(["props","attrs","module","advanced","loop"],null);if(!o)return t;const i="on"===o.getIn(["desktop","value","enable"]),a=o.getIn(["desktop","value","loopId"],"");if(!i||!(0,g.isString)(a))return t;let s=n,u=!1;return Object.keys(n).forEach((e=>{const t=n[e];if("divi/post-nav"!==t.getIn(["name"]))return;const r=t.getIn(["props","attrs","module","advanced","targetLoop"],null);if(!r)return;const o=r.getIn(["desktop","value"],"");(0,g.isString)(a)&&o===a&&(s=s.setIn([e,"props","attrs","module","advanced","targetLoop","desktop","value"],"main_query"),u=!0)})),u?t.setIn(["content"],s):t})(t,e.setIn(["content"],d).setIn(["layouts",r,"removedModules",t],{id:t,timestamp:Date.now()}));return c},Tt=(e,t,n,r)=>{let o=e.getIn(["content"]);const i=o.getIn([t,"children"],[]),a=n.split(","),s=(0,g.isArray)(i)?i.length:0,u=a.length,l="divi/row-inner"===o.getIn([t,"name"])?"divi/column-inner":"divi/column";if(o=o.setIn([t,"props","attrs","module","advanced","columnStructure","desktop","value"],n),s>u){const t=s-u,n=i.slice(0-t),r=i[u-1];(0,g.forEach)(n,(t=>{const n=o.getIn([t,"children"],[]),i=o.getIn([r,"children"],[]).concat(n);(0,g.forEach)(n,(e=>{o=o.setIn([e,"parent"],r)})),o=o.setIn([r,"children"],i),o=o.setIn([t,"children"],[]),o=At(e.setIn(["content"],o),t).getIn(["content"])}))}else if(s<u){const e=u-s;(0,g.forEach)(a.slice(0-e),(e=>{o=Ot(o,t,l,{attrs:{builderVersion:r,module:{advanced:{type:{desktop:{value:e}}}}}},"inside")}))}return(0,g.forEach)(i,((e,t)=>{o=a[t]?o.setIn([e,"props","attrs","module","advanced","type","desktop","value"],a[t]):o.without(e)})),e.setIn(["content"],o)};var Ct=window.divi.constantLibrary;const St=(e,t,n,r,o="user")=>{const a=e.getIn([t,"props","attrs"],i()({})),s=n.split("."),u=s.length>1,l=u?s[0]:n,d=u?a.getIn([l],i()({})).setIn((0,g.tail)(s),r):r,c=e.getIn([t,"props","attrs","unsyncAttrs"])?.asMutable();if("global-layout"===o){if(Array.isArray(c)&&c.some((e=>e?.attrName===n)))return e}return e.setIn([t,"props","attrs",l],d)},Dt=(e,t,n)=>{const r=n.split("."),o=r[0],i=r.length>1,a=e.getIn([t,"props","attrs"]);if(i){const n=(0,g.last)(r),i=(0,g.slice)(r,0,r.length-1),s=a.getIn(i);if(s){const r=(e=e.setIn([t,"props","attrs"].concat(i),s.without(n))).getIn([t,"props","attrs"]),a=r.getIn([o]),u=(0,J.removeEmptyObjectRecursive)(a?.asMutable({deep:!0}));(0,g.isEmpty)(u)?e=e.setIn([t,"props","attrs"],r.without(o)):(0,g.isEqual)(u,a?.asMutable({deep:!0}))||(e=e.setIn([t,"props","attrs",o],u))}return e}return e.setIn([t,"props","attrs"],a.without(n))},Lt=(e,t,n,r)=>e.map(((e,o)=>{const i=o%t.template.length;return{columnId:e,flexType:(0,J.getAttrValue)({attr:t.template[i].flexTypeAttr,breakpoint:n,state:r,mode:"getAndInheritAll",baseBreakpoint:"desktop",breakpointNames:J.defaultBreakpointNames})??null}})),Rt=(e,{breakpointName:t,attrState:n,rowId:r,flexColumnStructureValue:o,flexWrapValue:i,columnsData:a})=>{let s=e.getIn(["content"]);return null!==o&&(s=St(s,r,`module.advanced.flexColumnStructure.${t}.${n}`,o)),null!==i&&(s=St(s,r,`module.decoration.layout.${t}.${n}.flexWrap`,i)),null!==o&&(s=Dt(s,r,`module.decoration.layout.${t}.${n}.flexDirection`)),null!==o&&(s=Dt(s,r,`module.decoration.layout.${t}.${n}.alignContent`)),a.forEach((({columnId:e,flexType:r})=>{null!==r&&(s=St(s,e,`module.advanced.flexType.${t}.${n}`,r))})),e.setIn(["content"],s)},Ut=(e,t)=>"desktop"===t.breakpoint&&"value"===t.state?((e,t)=>{const{id:n,value:r,breakpoint:i,state:a}=t,s=(0,J.getPremadeGrid)(r);if(!s)return e;const u=e.getIn(["content",n],null);if(!u)return e;const l=(0,o.asMutable)(u.getIn(["children"],[])),d=(()=>{const e=u.getIn(["props","attrs","module","advanced","flexColumnStructure"],null);if(e&&e.desktop?.value)return e;const t=u.getIn(["props","attrs","module","advanced","columnStructure","desktop","value"],null);if(t){const e=t.split(",").length;return{desktop:{value:(0,J.newFlexColumnStructure)(e)}}}return{desktop:{value:"equal-columns_1"}}})();if(d.phone||(e=Rt(e,{breakpointName:"phone",attrState:"value",rowId:n,flexColumnStructureValue:null,flexWrapValue:s.layoutAttr?.phone?.value?.flexWrap??null,columnsData:Lt(l,s,"phone","value")})),!d.phoneWide){const t=s.layoutAttr?.phoneWide?.value?.flexWrap??s.layoutAttr?.phone?.value?.flexWrap??null;e=Rt(e,{breakpointName:"phoneWide",attrState:"value",rowId:n,flexColumnStructureValue:null,flexWrapValue:t,columnsData:Lt(l,s,"phone","value")})}if(d.tablet||(e=Rt(e,{breakpointName:"tablet",attrState:"value",rowId:n,flexColumnStructureValue:null,flexWrapValue:s.layoutAttr?.tablet?.value?.flexWrap??null,columnsData:Lt(l,s,"tablet","value")})),!d.tabletWide){const t=s.layoutAttr?.tabletWide?.value?.flexWrap??s.layoutAttr?.tablet?.value?.flexWrap??null;e=Rt(e,{breakpointName:"tabletWide",attrState:"value",rowId:n,flexColumnStructureValue:null,flexWrapValue:t,columnsData:Lt(l,s,"tablet","value")})}return Rt(e,{breakpointName:i,attrState:a,rowId:n,flexColumnStructureValue:r,flexWrapValue:s.layoutAttr?.desktop?.value?.flexWrap??null,columnsData:Lt(l,s,"desktop","value")})})(e,t):((e,t)=>{const{id:n,value:r,breakpoint:i,state:a}=t,s=(0,J.getPremadeGrid)(r);if(!s)return e;const u=Ct.flexWrapRowBreakpoints.includes(i)?"wrap":"nowrap",l=(0,o.asMutable)(e.getIn(["content",n,"children"],[])).map(((e,t)=>{const n=t%s.template.length;return{columnId:e,flexType:s.template[n].flexTypeAttr?.desktop?.value??null}}));return Rt(e,{breakpointName:i,attrState:a,rowId:n,flexColumnStructureValue:r,flexWrapValue:u,columnsData:l})})(e,t),Pt=(e,{rowId:t,breakpoint:n,state:r="value",isInherit:o=!1})=>{let i=e.getIn(["content"]);const a=i.getIn([t,"children"],[]);if(i=Dt(i,t,`module.advanced.flexColumnStructure.${n}.${r}`),i=Dt(i,t,`module.decoration.layout.${n}.${r}.flexWrap`),a.forEach((e=>{i=Dt(i,e,`module.advanced.flexType.${n}.${r}`)})),e=e.setIn(["content"],i),o){const n=i.getIn([t,"props","attrs","module","advanced","flexColumnStructure","desktop","value"],null);n&&(e=Ut(e,{id:t,breakpoint:"desktop",state:"value",value:n}))}return e},Nt=(e,t,n,r,o,i)=>{if(!e.getIn([t]))return e;const a=i||(0,J.getPremadeGrid)(r);if(!a)return e;const s=a?.template,u="inside"===n?t:e.getIn([t]).parent,l=e.getIn([u])?.children,d=M(),c={id:d,name:"divi/row",children:[],parent:u,props:{attrs:(()=>{const e={advanced:{flexColumnStructure:{desktop:{value:r}}}};return a.layoutAttr?{builderVersion:o,module:{...e,decoration:{layout:{...a.layoutAttr}}}}:{builderVersion:o,module:e}})()}},m="inside"===n?(0,g.isArray)(l)?[...l,d]:[d]:p(d,t,l.asMutable(),n);return e=e.merge({[d]:c}).setIn([u,"children"],m),s.forEach((t=>{switch(t.type){case"column":{const n=M(),r={id:n,name:"divi/column",parent:d,props:{attrs:{builderVersion:o,module:{advanced:{flexType:{...t.flexTypeAttr}}}}},children:[]},i=e.getIn([d,"children"]),s=(0,g.isArray)(i)?[...i,n]:[n];e=e.merge({[n]:r}).setIn([d,"children"],s),t.children&&t.children.forEach((t=>{e=Nt(e,n,"inside",t.columnStructure,o,{...a,name:t.columnStructure,layoutAttr:t.layoutAttr,template:t.children})}));break}}})),e},wt=(e,{id:t,position:n,template:r,isAddSection:o,builderVersion:a})=>!0===o?((e,t,n,r,o)=>{if(!e.getIn([t]))return e;const a=e.getIn(["root","children"]),s=M(),u=i()({id:s,name:"divi/section",parent:"root",children:[],props:{attrs:{builderVersion:o}}}),l=p(s,t,a.asMutable(),n);return e=e.merge({[s]:u}).setIn(["root","children"],l),Nt(e,s,"inside",r,o)})(e,t,n,r,a):Nt(e,t,n,r,a),kt=(e,t,n,r,o,i=!1,a="")=>{const s=e.getIn([t]).parent,u="inside"===n?t:s,l=e.getIn([u])?.children,d=i?"divi/row-inner":"divi/row",c=e.getIn([u,"props","attrs","globalModule"],!1),m=e.getIn([u,"props","attrs","globalParent"],!1),f=c||m||!1,I=a||M(),y={id:I,name:d,children:[],parent:u,props:{attrs:{builderVersion:o,module:{advanced:{columnStructure:{desktop:{value:r}}},decoration:{layout:{desktop:{value:{display:"block"}}}}},...f&&{globalParent:f}}}},E="inside"===n?(0,g.isArray)(l)?[...l,I]:[I]:p(I,t,l.asMutable(),n);e=e.merge({[I]:y}).setIn([u,"children"],E);const _=r.split(","),h=_.length,v={};for(let e=0;e<h;e++){const t=M();v[t]={id:t,name:i?"divi/column-inner":"divi/column",parent:I,props:{attrs:{builderVersion:o,module:{advanced:{type:{desktop:{value:_[e]}}},decoration:{layout:{desktop:{value:{display:"block"}}}}}}},children:[]}}return f&&(e=e.setIn([y.id,"props","attrs","globalParent"],f)),e.merge(v).setIn([I,"children"],(0,g.keys)(v))},Vt=(e,t)=>{const{id:n,value:r,breakpoint:i,state:a}=t,s=(0,J.getPremadeGrid)(r);if(!s)return e;const u=e.getIn(["content",n],null);if(!u)return e;const l=Ct.flexWrapRowBreakpoints.includes(i)?"wrap":"nowrap",d=(0,o.asMutable)(u.getIn(["children"],[])).map(((e,t)=>{const n=t%s.template.length;return{pricingTableId:e,flexType:(0,J.getAttrValue)({attr:s.template[n].flexTypeAttr,breakpoint:i,state:a,mode:"getAndInheritAll",baseBreakpoint:"desktop",breakpointNames:J.defaultBreakpointNames})??null}}));return((e,{breakpointName:t,attrState:n,pricingTablesId:r,flexColumnStructureValue:o,flexWrapValue:i,pricingTablesData:a})=>{let s=e.getIn(["content"]);return null!==o&&(s=St(s,r,`module.advanced.flexColumnStructure.${t}.${n}`,o)),null!==i&&(s=St(s,r,`module.decoration.layout.${t}.${n}.flexWrap`,i)),a.forEach((({pricingTableId:e,flexType:r})=>{null!==r&&(s=St(s,e,`module.advanced.flexType.${t}.${n}`,r))})),e.setIn(["content"],s)})(e,{breakpointName:i,attrState:a,pricingTablesId:n,flexColumnStructureValue:r,flexWrapValue:l,pricingTablesData:d})},Gt=(e,t)=>{const n=e.getIn(["content"]),{id:r}=t,o=n.getIn([r]);if((0,g.isEmpty)(o))return e;const i=o.getIn(["parent"]),a=n.getIn([i,"children"],[]).asMutable().filter((e=>e!==r));let s=n.setIn([i,"children"],a);const u=(0,J.populateContentTree)({tree:n,rootId:r});return(0,g.forEach)(u,((e,t)=>{s=s.without(t)})),e.setIn(["content"],s)},Bt=(e,t,n)=>{const{root:r,...o}=t,i=e.getIn([n,"parent"]),a=e.getIn([i,"children"],[]).reduce(((e,t)=>t===n?e.concat(r.children):e.concat(t)),[]),s=o[t.root.children[0]].props.attrs,u=e.getIn([n,"props","attrs","unsyncAttrs"])?.asMutable(),l={globalModule:e.getIn([n,"props","attrs","globalModule"])},d={...s,...u,...l},c=(e=>{const t=[],n=(e,r)=>{(0,g.forEach)(e,((e,o)=>{const i=[...r,o];"desktop"===o?t.push(r):(0,g.isObject)(e)&&n(e,i)}))};return n(e,[]),t})(u).map((e=>({attrName:e.join(".")})));return e.merge(o).setIn([i,"children"],a).without(n).setIn([t?.root?.children[0],"parent"],i).setIn([t?.root?.children[0],"props","attrs"],d).setIn([t?.root?.children[0],"props","attrs","unsyncAttrs"],c)},Ft=(e,t)=>{const n=e.getIn(["content",t]);return e.getIn(["content",(0,g.get)(n,"parent")])},xt=R([V()(((e,t)=>{const n=[],r=t=>{const o=Ft(e,t);"divi/root"!==o?.name?o?.id&&(n.push({id:o.id,name:o.name}),r(o.id)):n.push({id:o.id,name:(0,rt.__)("Page","et_builder")})};return r(t),n})),(e,t,n)=>n||"top-to-bottom"],V()(((e,t)=>("top-to-bottom"===t&&e.reverse(),e)))),jt={},Yt=R([e=>e.getIn(["content"]),(e,t="postContent")=>e.getIn(["layouts",t,"removedModules"])||jt],V()(((e,t)=>{if(!e)return{};const n={};for(const r in e){if(!Object.prototype.hasOwnProperty.call(e,r))continue;if(t[r])continue;const o=e[r],i=o.getIn(["props","attrs","module","advanced","loop"],null);if(!o.name||!i)continue;if(!("on"===i?.getIn(["desktop","value","enable"])))continue;const a=i?.getIn(["desktop","value","loopId"])??"";if(!a)continue;const s=o.getIn(["props","attrs","module","meta","adminLabel"],null)?.desktop?.value??"",u=o.name.replace("divi/","").replace(/-/g," "),l=s||`${u.charAt(0).toUpperCase()}${u.slice(1)}`;n[a]={label:l}}return n}))),$t=R([e=>e],(e=>e.getIn(["content"]))),Wt=(e,t)=>{const n=e.getIn(["content",t,"props","attrs","globalModule"],i()({})),r=e.getIn(["content",t,"props","attrs","globalParent"],i()({}));return"string"==typeof n?String(n):"string"==typeof r?String(r):null},Ht=(e,t)=>{const n=e.getIn(["content"]),r=[];return Object.keys(n).forEach((n=>{const o=e.getIn(["content",n,"props","attrs"],i()({}))?.globalModule;o===t&&r.push(n)})),i()(r)},zt=R([e=>e,(e,t)=>t],((e,t)=>e.getIn(["content",t]))),qt=i()({}),Xt=R([(e,t)=>e.getIn(["content",t,"props","attrs"],qt),(e,t,n)=>n],((e,t)=>{const n=t.split(".");return e.getIn(n,qt)})),Jt=R([e=>e,(e,t)=>t,(e,t,n)=>n],((e,t,n=i()({}))=>e.getIn(["content",t,"props","attrs"])||n)),Qt=R([(e,t)=>e.getIn(["content",t])],(e=>e?.getIn(["name"])??"")),Kt=R([(e,t)=>t,e=>e.getIn(["content"])],V()(((e,t)=>(0,g.pickBy)(t,(t=>(0,g.includes)(e,t.id)))))),Zt=(e,t,n)=>x(t,e.getIn(["content"]),n),en=(e,t)=>{const n=[t],r=e.getIn(["content"]),o=e=>{(0,g.forEach)((0,g.get)(e,"children",{}),(e=>{n.push(e),o(r.getIn([e]))}))};return o(r.getIn([t])),n},tn=(e,t)=>{const n=e.getIn(["content",t,"name"]),r=e?.content[t]?.props?.attrs?.asMutable({deep:!0});return(0,J.getModuleType)(n,r)},nn=(e,t)=>{const n=e.getIn(["content",t]),r=e.getIn(["content",t,"children"]);let o={[t]:n,root:{...e.getIn(["content","root"]),children:[t]}};const i=t=>{t.forEach((t=>{o={...o,[t]:e.getIn(["content",t])};const n=e.getIn(["content",t,"children"]);n.length>0&&i(n)}))};return i(r),o},rn=R([(e,t)=>e.getIn(["content",t])],(e=>e?.getIn(["parent"]))),on=(e,t)=>{const n=Ft(e,t),r=(0,g.get)(n,"name"),o=(0,g.get)(n,["props","attrs"],i()({})).asMutable({deep:!0});return(0,J.getModuleType)(r,o)},an=R([e=>e.getIn(["content","root"])],(e=>e.getIn(["children"])?.asMutable()??[])),sn=(e,t)=>{const n=e.getIn(["content",t]),r=e.getIn(["content",n?.parent,"children"])?.asMutable();return r||[]},un=e=>e.getIn(["specialtySection"]),ln=e=>e.getIn(["presets"]),dn=(e,t,n,r,o,i)=>{const a=t?(0,J.getAttrSubnameValue)({attr:e,breakpoint:n,state:r,subname:t,baseBreakpoint:o,breakpointNames:i,mode:"get"}):(0,J.getAttrValue)({attr:e,baseBreakpoint:o,breakpoint:n,breakpointNames:i,state:r,mode:"get"});return!(0,g.isNil)(a)},cn=(e,t,n)=>{const r=Jt(e,t,i()({}));return!!r&&(({attrName:e,subName:t,moduleAttrs:n,baseBreakpoint:r,breakpointNames:o,checkHover:i=!0,checkSticky:a=!0})=>{if(!(e&&n&&o&&r))return!1;const s=(0,g.get)(n,e);return!!s&&(!!o.filter((e=>e!==r)).some((e=>dn(s,t,e,"value",r,o)))||!(!i||!dn(s,t,r,"hover",r,o))||!(!a||!o.some((e=>dn(s,t,e,"sticky",r,o)))))})({moduleAttrs:r,...n})},pn=(e,t,n)=>{const r=(0,l.isStickyModule)(t,e?.content),o=(0,l.isInsideStickyModule)(t,e?.content);return n?o:r||o},mn=(e,t)=>{const n=e=>{const t=(0,a.select)("divi/edit-post").getModule(e);if(!t)return!1;const r="on"===(0,g.get)(t.props.attrs,["module","decoration","disabledOn","desktopAbove","value"],"off"),o="on"===(0,g.get)(t.props.attrs,["module","decoration","disabledOn","tabletOnly","value"],"off"),i="on"===(0,g.get)(t.props.attrs,["module","decoration","disabledOn","phone","value"],"off"),s=r&&o&&i;return s||"divi/root"===t.name?s:n(t.parent)};return n(t)},gn=e=>{if(1<e.getIn(["content","root","children"]).length)return!1;const t=e.getIn(["content","root","children",0]);if(t){const n=e.getIn(["content",t,"props","attrs"]);if(!(0,g.isEmpty)(n))return!1}const n=[],r=t=>{t&&t.children&&t.children.forEach((t=>{if(t){const o=e.getIn(["content",t]);o&&(-1===n.indexOf(t)&&n.push(t),r(o))}}))};return r(e.getIn(["content","root"])),!(1<n.length)},fn=R([(e,t)=>{let n={},r=0;const o=t=>{r++;const i=Ft(e,t);"divi/section"!==i?.name?"divi/root"!==i?.name&&(r>25||i?.id&&o(i.id)):n=i?.asMutable({deep:!0})},i=e.getIn(["content"]).getIn([t?.moduleId]);"divi/section"===i?.name?n=i?.asMutable({deep:!0}):o(t.moduleId);const a=n?.props?.attrs?.module?.advanced?.type?.desktop?.value;return["specialty","fullwidth"].includes(a)?a:"regular"},(e,t)=>t?.type],((e,t)=>e===t)),In=R([e=>e,(e,t)=>t],((e,t)=>{if("sticky"!==t?.state)return!1;if(!1===t?.modal?.isActive)return!1;if(t?.id===t?.modal?.owner)return!0;const n=xt(e,t?.modal?.owner);return!!Object.values(n).find((e=>e?.id===t?.id))&&(0,l.isStickyModule)(t?.id,e?.content?.asMutable({deep:!0}))})),yn=(e,t,n)=>{const r=e.getIn(["content",t]),{name:o}=r,i=(0,J.getModuleType)(r?.name,r?.attrs).replace(/fullwidth-|specialty-|-inner/gi,""),a=(0,g.capitalize)(o.replace(/divi\//,""));return{...n,layout_name:n.layout_name.replace("%module%",a),layout_type:i,module_width:o.includes("divi/fullwidth")?"fullwidth":"regular"}},En=R([e=>e,(e,t)=>t],((e,t)=>{let n={};const r=e.getIn(["content",t,"children"])||[];return r.forEach((t=>{n={...n,[t]:e.getIn(["content",t])}})),n})),_n=R([(e,t)=>en(e,t),e=>e.getIn(["content"]),(e,t,n)=>n,(e,t,n,r)=>r,(e,t)=>t],((e,t,n,r,o)=>e.filter((e=>{if(e===o&&!r)return!1;const i=t.getIn([e])?.getIn(["name"],"");return i&&((e,t)=>{if(!e||!t)return!1;const n=t.split(",").map((e=>e.trim().toLowerCase().replace("divi/",""))),r=e.replace("divi/","").toLowerCase();return!!n.includes("all")||(n.includes("all-modules")?!J.structuralModules.includes(e):n.includes("all-containers")?J.structuralModules.includes(e):n.includes(r))})(i,n)})))),hn=R([(e,t)=>e.getIn(["content",t,"props","attrs","groupPreset"],null),(e,t,n)=>n],((e,t)=>e?.getIn([t],null))),vn=i()({}),Mn=R([(e,t)=>e.getIn(["content",t,"props","attrs"],vn)],(e=>e.getIn(["modulePreset"]))),bn=i()({}),On=R([(e,t)=>e.getIn(["content",t,"props","attrs"],bn),(e,t,n)=>n],((e,t)=>e.getIn(["groupPreset",t]))),An=R([(e,t)=>Qt(e,t.moduleId),(e,t)=>{const n=Qt(e,t.moduleId);if(!t?.moduleId)return!1;if("divi/row"===n){const n=Ft(e,t.moduleId)?.name;return"divi/section"!==n}if("divi/column"===n){const n=Ft(e,t.moduleId),r=Ft(e,n?.id)?.name;return"divi/section"!==r}return xt(e,t.moduleId)}],((e,t)=>(0,g.isBoolean)(t)?t:t.some((t=>t?.name===e)))),Tn=R([(e,{moduleId:t})=>xt(e,t),(e,{types:t})=>t,e=>e],((e,t,n)=>e.filter((e=>"divi/column"===e.name)).some((e=>{const r=String(Xt(n,e.id,"module.advanced.type.desktop.value")),o=String(Xt(n,e.id,"module.advanced.flexType.desktop.value")),i=Array.isArray(t)?t:[t];return i.includes(r)||i.includes(o)})))),Cn=R([(e,t)=>e.getIn(["content",t,"props","attrs","css"])],(e=>{if(!e||!Object.keys(e).length)return{};const t=e.asMutable({deep:!0}),n={};return Object.entries(t).forEach((([e,t])=>{Object.entries(t).forEach((([t,r])=>{const o=r?.freeForm?.match(/\{([^{}]+)\}/);let i=o?o[1].trim():"";if(i=i.replace(/\n/g,"").replace(/ {2,}/g," "),i){n[e]||(n[e]={}),n[e]?.[t]||(n[e]={...n[e],[t]:{}});const r=(0,J.parseCssVariables)(i);n[e][t]=r}}))})),n})),Sn={queryItems:[],isParentLoopEnabled:!1},Dn=R([e=>e,(e,t)=>t],((e,t)=>{const n=e.getIn(["content",t,"props","attrs","module","advanced","loop"]),r="on"===(0,g.get)(n,"desktop.value.enable","off"),o=e.getIn(["loopData",t]);if(o&&r){return{...o.asMutable({deep:!0}),isParentLoopEnabled:!1}}const i=e.getIn(["content",t]);if(!i)return Sn;const a=t=>{const n=e.getIn(["content",t]);if(!n)return Sn;const r="on"===n.getIn(["props","attrs","module","advanced","loop"],null)?.desktop?.value?.enable,o=e.getIn(["loopData",t]);if(o){return{...o.asMutable({deep:!0}),isParentLoopEnabled:!0}}if(r)return{queryItems:[],isParentLoopEnabled:!0};if(n.parent){const e=a(n.parent);return{...e,isParentLoopEnabled:e.isParentLoopEnabled||r}}return Sn};return i.parent?a(i.parent):Sn})),Ln=R([(e,t)=>t,e=>e.content],((e,t)=>{if(!e)return null;return Object.keys(t.asMutable()).find((n=>{const r=t.getIn([n]);if(r){const t=r.getIn(["props","attrs"]);if(t){return t.getIn(["module","decoration","interactionTarget"])===e}}return!1}))||null})),Rn=(e,t,n,r)=>{if(!(0,b.applyFilters)("divi.editPost.moveModule.enable",!0,e,t,n,r))return e;const o=e,i=e.getIn(["content",t,"parent"]),s=e.getIn(["content",i,"children"]).filter((e=>e!==t)),u=(0,g.get)(e,["content",t,"name"],"");e=e.setIn(["content",i,"children"],s);const l="inside"===n?r:e.getIn(["content",r,"parent"]);if("divi/column"===u||"divi/column-inner"===u){const t=e.getIn(["content",l,"children"])?.length??0,n="block"!==e.getIn(["content",l,"props","attrs","module","decoration","layout","desktop","value","display"],"");if(t>={"divi/column":6,"divi/column-inner":3}[u]&&!n)return o}const d=(0,g.get)(e,["content",l,"name"],""),c=(0,g.get)(e,["content",l,"props","attrs"])||{};if(!(0,a.select)("divi/module-library").isValidChild(d,c,u))return o;if("divi/row"===u&&"divi/column"===d){if(!fn(e,{moduleId:l,type:"regular"}))return o}const m=e.getIn(["content",l,"children"],[])?.asMutable(),f="inside"===n?m.concat([t]):p(t,r,m,n);return e.setIn(["content",t,"parent"],l).setIn(["content",l,"children"],f)},Un=(e,t)=>{switch(t.type){case"ADD_COLUMN_VIA_DIVIDER":return j(),((e,t,n,r)=>{let o=e.getIn(["content"]);const i=o.getIn([t],{}),a=i.getIn(["props","attrs","module","advanced","columnStructure","desktop","value"],"4_4").split(","),s=i.getIn(["children"],[]).asMutable(),u="divi/row-inner"===(0,g.get)(i,"name"),l=a.length+1,d=(0,g.times)(l,(()=>`1_${l}`)).join(","),c=u?"divi/column-inner":"divi/column",p=0===n?0:n-1,m=(0,g.nth)(s,p);o=Ot(o,m,c,{attrs:{builderVersion:r}},0===n?"before":"after");const f=e.setIn(["content"],o);return Tt(f,t,d,r)})(e,t.id,t.dividerPosition,t.builderVersion);case"ADD_FLEX_COLUMN_VIA_DIVIDER":return j(),((e,t,n,r,o)=>{const i=e.getIn(["content",t],null);if(!i)return e;const a=e.getIn(["content",n],null);if(!a)return e;let s=a?.getIn(["props","attrs","module","advanced","flexType","desktop","value"],"24_24");s&&"none"!==s||(s="24_24");const u=M(),l={attrs:{builderVersion:o,module:{advanced:{flexType:{desktop:{value:s}}}}}},d=i.getIn(["props","attrs","module","advanced","flexColumnStructure"],{desktop:{value:"equal-columns_1"}});(0,g.forEach)(d,((n,r)=>{(0,g.forEach)(n,((n,o)=>{"desktop"===r&&"value"===o||(e=Pt(e,{rowId:t,breakpoint:r,state:o}))}))}));const c=(e=e.setIn(["content"],Ot(e.getIn(["content"]),n,"divi/column",l,r,u))).getIn(["content",t,"children"],[]).length,p=d.getIn(["desktop","value"]),m=(0,J.getPremadeGrid)(p),f="wrap"===m?.layoutAttr?.desktop?.value?.flexWrap||"offset-columns"===m.category&&c<=m.template.length;return Ut(e,f?{id:t,value:p,breakpoint:"desktop",state:"value"}:{id:t,value:(0,J.newFlexColumnStructure)(c),breakpoint:"desktop",state:"value"})})(e,t.rowId,t.columnId,t.position,t.builderVersion);case"ADD_GRID":return j(),e.set("content",wt(e.getIn(["content"]),{id:t.id,position:t.position,template:t.template,isAddSection:t.isAddSection,builderVersion:t.builderVersion}));case"ADD_MODULE":return j(),e.set("content",Ot(e.getIn(["content"]),t.id,t.name,t.props,t.position,t.newId));case"ADD_ROW":return j(),e.set("content",kt(e.getIn(["content"]),t.id,t.position,t.columnStructure,t.builderVersion,t.inner));case"ADD_SPECIALTY_SECTION":return j(),e.set("content",((e,t,n,r,o)=>{if(!e.getIn([t]))return e;const a=(0,g.filter)(Ct.columnSpecialty,(e=>e.structure===r));if((0,g.size)(a)<1)return e;const s=(0,g.filter)(a,(e=>e.position===o));if((0,g.size)(s)<1)return e;const u=e.getIn(["root","children"]),l=M(),d=i()({id:l,name:"divi/section",parent:"root",children:[],props:{attrs:{module:{advanced:{type:{desktop:{value:"specialty"}}}}}}}),c=p(l,t,u.asMutable(),n);e=e.merge({[l]:d}).setIn(["root","children"],c);const m=r.split(","),f=m.length,I={},y=o.split(",");for(let e=0;e<f;e++){const t=M();I[t]={id:t,name:"divi/column",parent:l,props:{attrs:{module:{advanced:{type:{desktop:{value:m[e]}}}}}},children:[]},"1"===y[e]&&(I[t].props.attrs.module.advanced.specialtyColumns={desktop:{value:"2_3"===m[e]?"4":"3"}})}return e.merge(i()(I)).setIn([l,"children"],(0,g.keys)(I))})(e.getIn(["content"]),t.id,t.position,t.columnStructure,t.innerPosition));case"CHANGE_COLUMN_STRUCTURE":return j(),Tt(e,t.id,t.columnStructure,t.builderVersion);case"CHANGE_FLEX_COLUMN_STRUCTURE":return j(),Ut(e,{id:t.id,value:t.value,breakpoint:t.breakpoint,state:t.state});case"CHANGE_PRICING_TABLES_FLEX_COLUMN_STRUCTURE":return j(),Vt(e,{id:t.id,value:t.value,breakpoint:t.breakpoint,state:t.state});case"CHANGE_COLUMN_STRUCTURE_FOR_DRAG_AND_DROP":return j(),((e,t,n)=>{let r=e.getIn(["content"]);const o=r.getIn([t,"props","attrs","module","advanced","columnStructure","desktop","value"],""),i=r.getIn([n,"props","attrs","module","advanced","columnStructure","desktop","value"],""),a=o.split(",").length??0,s=i.split(",").length??0,u=e=>e>=2&&e<=6?Array(e).fill(`1_${e}`).join(","):"4_4",l=u(a-1),d=u(s+1);r=r.setIn([t,"props","attrs","module","advanced","columnStructure","desktop","value"],l).setIn([n,"props","attrs","module","advanced","columnStructure","desktop","value"],d);const c=r.getIn([n,"children"],[]),p=d.split(",")[0];c.forEach((e=>{r=r.setIn([e,"props","attrs","module","advanced","type","desktop","value"],p)}));const m=r.getIn([t,"children"],[]),g=l.split(",")[0];return m.forEach((e=>{r=r.setIn([e,"props","attrs","module","advanced","type","desktop","value"],g)})),e.setIn(["content"],r)})(e,t.sourceId,t.targetId);case"CHANGE_FLEX_COLUMN_STRUCTURE_FOR_DRAG_AND_DROP":return j(),((e,t)=>{const{id:n,parentRowId:r,targetRowColumnStructure:o}=t;let i=e.getIn(["content"]);const a=i.getIn([r]),s=i.getIn([r,"children"],[]);if(!a||!s)return e;if("block"===o){const t=s.length,o=`1_${t}`,a=Array(t).fill(o).join(","),u=[n,"props","attrs","module","advanced","type","desktop","value"];i=i.setIn(u,o);const l=[r,"props","attrs","module","advanced","columnStructure","desktop","value"];return i=i.setIn(l,a),s.forEach((e=>{if(e!==n){const t=[e,"props","attrs","module","advanced","type","desktop","value"];i=i.setIn(t,o)}})),e.setIn(["content"],i)}const u=s.indexOf(n);let l;l=0===u?s[u+1]:s[u-1];const d=i.getIn([l,"props","attrs","module","advanced","flexType","desktop","value"],"");return d&&(i=i.setIn([n,"props","attrs","module","advanced","flexType","desktop","value"],d)),e.setIn(["content"],i)})(e,{id:t.id,parentRowId:t.parentRowId,targetRowColumnStructure:t.targetRowColumnStructure});case"CLEAR_LAYOUT":return j(),e.set("content",(e=>{const t=M(),n={root:{id:"root",name:"divi/root",children:[t],props:{attrs:{}}},[t]:{id:t,name:"divi/section",children:[],parent:"root",props:{attrs:{builderVersion:e}}}};return i()(n)})(t.builderVersion));case"CLEAR_REMOVED_MODULES":return((e,t)=>{const n=t?.params?.layout??"postContent",r=e.getIn(["layouts",n,"removedModules"]);let o=e;return(0,g.forEach)(r,(r=>{const i=r?.id,a=(0,g.isObject)(e.getIn(["content",i])),s=e.getIn(["content",i,"parent"]),u=e.getIn(["content",s,"children"],[]),l=(0,g.includes)(u,i);a&&!l&&(o=Gt(o,{id:i,caller:t?.params?.caller})),o=o.setIn(["layouts",n,"removedModules"],e.getIn(["layouts",n,"removedModules"]).without(i))})),o})(e,t);case"CLONE_MODULE":return j(),e.set("content",((e,t)=>{const{id:n,moduleAppearanceSettings:r,themeBuilderLayout:o,moduleCount:i}=t,{clonedParent:a,clonedParentChildren:s,clonedModules:u}=N(e,{moduleId:n,targetParentId:"",moduleAppearanceSettings:r,themeBuilderLayout:o,moduleCount:i});return e.getIn(["content"]).merge(u).setIn([a,"children"],s)})(e,t.params));case"CLONE_COLUMN":return j(),((e,t)=>{const n=e.getIn(["content"]),{id:r,moduleAppearanceSettings:o={},themeBuilderLayout:i="postContent",moduleCount:a}=t,s=n.getIn([r],{}).getIn(["name"],"");if("divi/column"!==s&&"divi/column-inner"!==s)return e;const{clonedParent:u,clonedParentChildren:l,clonedModules:d}=N(e,{moduleId:r,moduleAppearanceSettings:o,themeBuilderLayout:i,moduleCount:a}),c=n.getIn([u],{}).getIn(["props","attrs","module","advanced","columnStructure","desktop","value"],"4_4").split(",").length+1,p=(0,g.times)(c,(()=>`1_${c}`)).join(","),m=n.merge(d).setIn([u,"children"],l),f=e.setIn(["content"],m);return Tt(f,u,p)})(e,t.params);case"CLONE_FLEX_COLUMN":return j(),((e,t)=>{const n=e.getIn(["content"]),{id:r,moduleAppearanceSettings:o={},themeBuilderLayout:i="postContent",moduleCount:a}=t,s=n.getIn([r],{}).getIn(["name"],"");if("divi/column"!==s&&"divi/column-inner"!==s)return e;const{clonedParent:u,clonedParentChildren:l,clonedModules:d}=N(e,{moduleId:r,moduleAppearanceSettings:o,themeBuilderLayout:i,moduleCount:a}),c=n.merge(d).setIn([u,"children"],l);return e.setIn(["content"],c)})(e,t.params);case"CONVERT_SELECTED_MODULES_TO_GROUP":return j(),e.set("content",((e,t)=>{const n=t[0],r=e.getIn([n,"parent"],""),o=M(),i=e.getIn([r,"props","attrs","globalModule"],!1),a=e.getIn([r,"props","attrs","globalParent"],!1),s=i||a||!1,u={id:o,children:[...t],name:"divi/group",parent:r,props:{}},l=e.getIn([r,"children"],[]),d=p(u.id,n,l.asMutable(),"after");return e=e.merge({[u.id]:u}).setIn([r,"children"],d),s?e.setIn([u.id,"props","attrs","globalParent"],s):(t.forEach((t=>{const n=e.getIn([t,"parent"]),r=e.getIn([n,"children"],[]);e=(e=e.setIn([n,"children"],r.asMutable().filter((e=>e!==t)))).setIn([t,"parent"],u.id)})),e)})(e.getIn(["content"]),t.selectedModuleIds));case"COPY_MODULE":return j(),e.set("content",((e,t)=>{const n=e.getIn(["content"]),{id:r,position:o,targetId:i,moduleAppearanceSettings:a,themeBuilderLayout:s,moduleCount:u}=t,l="inside"===o?i:n.getIn([i,"parent"]),d=n.getIn([i,"props","attrs","globalParent"]),{clonedModuleId:c,clonedModules:m}=N(e,{moduleId:r,targetParentId:l,moduleAppearanceSettings:a,themeBuilderLayout:s,moduleCount:u}),g=n.getIn([l,"children"],[]),f="inside"===o?g.concat([c]):p(c,i,g.asMutable(),o);return d?n.merge(m).setIn([l,"children"],f).setIn([c,"props","attrs","globalParent"],d):n.merge(m).setIn([l,"children"],f)})(e,t.params));case"COPY_MODULE_FROM_LIBRARY":return j(),e.set("content",((e,t,n,r)=>{const o="inside"===n?r:e.getIn([r,"parent"]),a=e.getIn([o]).asMutable({deep:!0}),s=(0,J.maybeUnwrapPlaceholderBlock)(t.getIn(["content"],"")),u=w((0,c.maybeConvertContent)(s));let l=i()(W(u,{...a,children:[]}));if("inside"!==n){const t=e.getIn([o,"children"],[]),i=l.getIn([o,"children"]),a=t.reduce(((e,t)=>t===r?"before"===n?e.concat([...i.asMutable(),t]):e.concat([t,...i.asMutable()]):e.concat(t)),[]);l=l.setIn([o,"children"],a)}if("global"===t.is_global){const e=l.getIn([o,"children"],[]);Object.keys(l.without(o)).forEach((n=>{l=e.includes(n)?l.setIn([n,"props","attrs","globalModule"],String(t.ID)):l.setIn([n,"props","attrs","globalParent"],String(t.ID))}))}return e.merge(l)})(e.getIn(["content"]),t.payload,t.position,t.targetId));case"COPY_MODULE_FROM_PAYLOAD":return j(),e.set("content",((e,t)=>{const n=e.getIn(["content"]),{payload:r,position:o,targetId:i,moduleAppearanceSettings:a,themeBuilderLayout:s,moduleCount:u}=t,l=r.moduleObjects.getIn([r.moduleId,"parent"]),d=n.getIn([l]),c="inside"===o?i:n.getIn([i,"parent"]),m=n.getIn([c]),g=n.getIn([i,"props","attrs","globalParent"]),f=r.moduleObjects.setIn([l],d).setIn([c],m),I=e.setIn(["content"],f),{clonedModuleId:y,clonedModules:E}=N(I,{moduleId:r.moduleId,targetParentId:c,moduleAppearanceSettings:a,themeBuilderLayout:s,moduleCount:u}),_=n.getIn([c,"children"],[]),h="inside"===o?_.concat([y]):p(y,i,_.asMutable(),o);return g?n.merge(E).setIn([c,"children"],h).setIn([y,"props","attrs","globalParent"],g):n.merge(E).setIn([c,"children"],h)})(e,t.params));case"COPY_MODULES_FROM_PAYLOAD":return j(),e.set("content",((e,t)=>{const{payload:n,position:r,targetId:o,moduleAppearanceSettings:a,themeBuilderLayout:s,moduleCount:u}=t;let l=o,d=r,c=e.getIn(["content"]);return(0,g.forEach)(n.moduleIds,(t=>{const r=n.moduleObjects.getIn([t,"parent"]),m=c.getIn([r]),g="inside"===d?l:c.getIn([l,"parent"]),f=c.getIn([g]),I=c.getIn([o,"props","attrs","globalParent"]),y=n.moduleObjects.setIn([r],m).setIn([g],f),E=e.setIn(["content"],y),{clonedModuleId:_,clonedModules:h}=N(E,{moduleId:t,targetParentId:g,moduleAppearanceSettings:a,themeBuilderLayout:s,moduleCount:u}),v=c.getIn([g,"children"],i()([])),M="inside"===d?v.concat([_]):p(_,l,v.asMutable(),d);l=_,d="after",I&&(c=c.merge(h).setIn([g,"children"],M).setIn([_,"props","attrs","globalParent"],I)),c=c.merge(h).setIn([g,"children"],M)})),c})(e,t.params));case"DISABLE_GLOBAL_MODULE":return j(),e.set("content",((e,t)=>{let n=e;const r=t=>{const o=e.getIn([t,"props","attrs"]).without("globalModule").without("globalParent");n=n.setIn([t,"props","attrs"],o);const i=e.getIn([t,"children"]);(0,g.isEmpty)(i)||(0,g.forEach)(i,(e=>{r(e)}))};return r(t),n})(e.getIn(["content"]),t.id));case"EDIT_CHILDREN":return j(),e.set("content",((e,t,n)=>e.setIn([t,"children"],n))(e.getIn(["content"]),t.id,t.children));case"IMPORT_CONTENT":return j(),e.set("content",(({state:e,content:t,presetIdsToReplace:n,defaultPresetAttrs:r,importOptionsValues:s,defaultImportedModulePresetIds:u,defaultImportedGroupPresetIds:l})=>{const d=(0,a.select)("divi/settings").getSetting(["conditionalTags","is_tb"]),{replaceLayout:p,removeGlobalScope:m}=s;let f=(0,c.maybeConvertContent)(t);"on"===m&&(f=f.replace(/,"globalModule":"\d+"/g,"").replace(/,"globalParent":"\d+"/g,"")),d||(f=f.replace(/<!-- wp:divi\/post-content.*?-->/g,""));const I=W(f),y=(0,g.filter)(I,(e=>"divi/section"===e.name||"divi/shortcode-module"===e.name&&"et_pb_section"===(0,g.get)(e,"props.attrs.shortcodeName")));let E=i()(I);if((0,g.forEach)(n,((e,t)=>{Object.values(I).filter((({name:e})=>e===t)).map((({id:e})=>e)).forEach((t=>{const n=E.getIn([t,"props","attrs","modulePreset"]);e[n]&&(E=E.setIn([t,"props","attrs","modulePreset"],e[n]))}))})),(0,g.forEach)(r,((e,t)=>{Object.values(I).filter((({name:e})=>e===t)).map((({id:e})=>e)).forEach((t=>{"default"===E.getIn([t,"props","attrs","modulePreset"])&&(E=E.setIn([t,"props","attrs"],(0,g.merge)({},e,E.getIn([t,"props","attrs"]).asMutable({deep:!0}))))}))})),(0,g.isEmpty)(u)||(0,g.forEach)(u,(({moduleName:e,presetId:t})=>{(0,g.forEach)(I,(({props:n,name:r,id:o})=>{e===r&&"divi/root"!==r&&((0,g.get)(n,["attrs","modulePreset"])||(E=E.setIn([o,"props","attrs","modulePreset"],t)))}))})),(0,g.isEmpty)(l)||(0,g.forEach)(I,(({props:e,name:t,id:n})=>{if("divi/root"===t)return;const r=(0,a.select)("divi/module-library").getModule(t),i=(0,g.isUndefined)(r)?{}:(0,J.getGroupPresetDefaultAttr)((0,o.asMutable)(r,{deep:!0})),s=(0,g.get)(e,["attrs","groupPreset"],{}),u=(0,g.merge)({},i,s);if(!u)return;const d=E.getIn([n,"props","attrs","groupPreset"])?.asMutable({deep:!0});let c=d??{};(0,g.forEach)(l,(e=>{const t=Object.fromEntries(Object.entries(u).filter((([t,n])=>n.groupName===e.groupName))),n=Object.keys(u).find((t=>u[t].groupName===e.groupName)),r=!(!n||!u[n]),o=u[n]?.presetId,i=e.groupName,a=e.presetId;(0,g.forEach)(t,((t,n)=>{t.groupName===e.groupName&&(0,g.isEmpty)(t.presetId)&&(c={...c,[n]:{presetId:a,groupName:i}})})),(0,g.isEmpty)(d)&&r?c={...c,[e.groupId]:{presetId:a,groupName:i}}:!(0,g.isEmpty)(d)&&r&&(0,g.isEmpty)(o)&&(c={...c,[e.groupId]:{...c[e.groupId],presetId:a,groupName:i}})})),(0,g.isEmpty)(c)||(E=E.setIn([n,"props","attrs","groupPreset"],c))})),"on"===p)return E.setIn(["root","children"],(0,g.values)((0,g.map)(y,"id")));const _=[...e.getIn(["root","children"]).asMutable(),...(0,g.map)(y,"id")];return e.merge(E).setIn(["root","children"],(0,g.values)(_))})({state:e.getIn(["content"]),content:t.content,presetIdsToReplace:t.presetIdsToReplace,defaultPresetAttrs:t.defaultPresetAttrs,importOptionsValues:t.importOptionsValues,defaultImportedModulePresetIds:t.defaultImportedModulePresetIds,defaultImportedGroupPresetIds:t.defaultImportedGroupPresetIds}));case"MERGE_GLOBAL_MODULES":return j(),e.set("content",Bt(e.getIn(["content"]),t.content,t.owner));case"MOVE_MODULE":return j(),Rn(e,t.id,t.position,t.targetId);case"MOVE_MODULES":return j(),((e,t,n,r,o)=>{const a=x(t,e.getIn(["content"]),!0),s=(0,g.map)((0,g.values)(a),(e=>(0,J.getModuleType)(e.name,e.props.attrs))),u=(0,g.uniq)(s);if(u.length>1){const s=(0,J.extractLowestModuleType)(u),l=(0,J.getParentType)(s),d=l&&(0,g.isString)(l)?(0,J.getChildType)(l):"",c=(0,g.mapValues)(J.moduleTypeRanks,(()=>null)),p=(0,g.sortBy)((0,g.values)(a),(e=>J.moduleTypeRanks[(0,J.getModuleType)(e.name,e.props.attrs)]+t.indexOf(e.id)/100)),m=t=>{(0,g.forEach)(t,(t=>{const n=(0,J.getModuleType)(t.name,t.props.attrs);if((0,g.isNull)(c[n])){c[n]=t;const r=x(t.children,e.getIn(["content"]),!0);m((0,g.values)(r))}}))};m(p);let f=!(0,g.isNull)(c.section);const I=!(0,g.isNull)(c["specialty-section"]),y=!(0,g.isNull)(c["fullwidth-section"]),E=!(0,g.isNull)(c["fullwidth-module"]),_=!(0,g.isNull)(c.row),h=!(0,g.isNull)(c.column),v=!(0,g.isNull)(c.module);if(!f&&v&&y&&!I){const t=M(),n={attrs:{}};e=e.setIn(["content"],Ot(e.getIn(["content"]),r,"divi/section",n,"after",t)),c.section=e?.content?.[t]?.asMutable({deep:!0}),f=!0}if(f&&v){const t=!(0,g.isNull)(c.row),n=!(0,g.isNull)(c.column);if(!t){const t=M(),n=(e=e.setIn(["content"],kt(e.getIn(["content"]),c.section.id,"inside","4_4",o,!1,t))).getIn(["content",t,"children",0]);c.row=e?.content?.[t]?.asMutable({deep:!0}),c.column=e?.content?.[n]?.asMutable({deep:!0})}if(t&&!n){const t=(0,g.get)(c,["row","id"]),n=M(),r={attrs:{module:{advanced:{type:{desktop:{value:"4_4"}}}}}};e=(e=e.setIn(["content"],St(e.getIn(["content"]),t,"module.advanced.columnStructure",i()({desktop:{value:"4_4"}})))).setIn(["content"],Ot(e.getIn(["content"]),t,"divi/column",r,"inside",n)),c.column=e?.content?.[n]?.asMutable({deep:!0})}}if(!y&&E&&(f||I)){const t=M(),n={attrs:{module:{advanced:{type:{desktop:{value:"fullwidth"}}}}}};e=e.setIn(["content"],Ot(e.getIn(["content"]),r,"divi/section",n,"after",t)),c["fullwidth-section"]=e?.content?.[t]?.asMutable({deep:!0})}if(!f&&_&&!h){const t=M();e=(e=e.setIn(["content"],St(e.getIn(["content"]),c.row.id,"module.advanced.columnStructure",i()({desktop:{value:"4_4"}})))).setIn(["content"],Ot(e.getIn(["content"]),c.row.id,"divi/column",{attrs:{module:{advanced:{type:{desktop:{value:"4_4"}}}}}},"inside",t)),c.column=e?.content?.[t]?.asMutable({deep:!0})}let b=null;(0,g.forEach)(p,(t=>{const o=(0,J.getModuleType)(t.name,t.props.attrs),i=(0,J.getParentType)(o);if((0,g.isArray)(d)?(0,g.includes)(d,o):d===o)e=(0,g.isNull)(b)?Rn(e,t.id,n,r):Rn(e,t.id,"after",b),b=t.id;else if((0,g.isString)(i)&&!(0,g.isEmpty)((0,g.get)(c,[i,"children"]))){const n=(0,g.get)(c,[o,"id"]);e=Rn(e,t.id,"inside",(0,g.get)(e,["content",n,"parent"]))}else(0,g.isArray)(i)?(0,g.forEach)(i,(n=>{(0,g.isNull)(c[n])||(e=Rn(e,t.id,"inside",(0,g.get)(c,[n,"id"])))})):i&&(0,g.isString)(i)&&!(0,g.isNull)(c[i])&&(e=Rn(e,t.id,"inside",(0,g.get)(c,[i,"id"])))}))}else{let o=r;(0,g.forEach)(t,(t=>{e=Rn(e,t,n,o),"after"===n&&(o=t)}))}return e})(e,t.ids,t.position,t.targetId,t.builderVersion);case"EDIT_MODULE_ATTRIBUTE":return j(),e.set("content",St(e.getIn(["content"]),t.id,t.attrName,t.value,t.caller));case"EDIT_UNSYNC_ATTRS":return j(),e.set("content",((e,t,n,r)=>{const o=e.getIn([t,"props","attrs","unsyncAttrs"])||[];return r?e.setIn([t,"props","attrs","unsyncAttrs"],[...o,n]):(0,g.isEmpty)(o)?e:e.setIn([t,"props","attrs","unsyncAttrs"],o.filter((e=>e?.attrName!==n?.attrName&&e?.subName!==n?.subName)))})(e.getIn(["content"]),t.id,t.attribute,t.isSynced));case"EDIT_MODULE_PROP":return j(),e.set("content",((e,t,n,r)=>e.setIn([t,"props",n],r))(e.getIn(["content"]),t.id,t.propName,t.propValue));case"REMOVE_GROUP_PRESET_ATTRIBUTE":return j(),e.set("content",((e,t,n,r)=>{const o=e.getIn([t,"props","attrs"]);if(!(0,g.isEmpty)(o[n])){const i=o.getIn([n]).without(r),a=o.set(n,i);return e.setIn([t,"props","attrs"],a)}return e})(e.getIn(["content"]),t.id,t.attrName,t.groupId));case"REPLACE_MODULE_ATTRIBUTES":return j(),e.set("content",((e,t,n,r=!1)=>r?e.setIn([t,"props","attrs"],n):((0,g.forEach)(n,((n,r)=>{e=e.setIn([t,"props","attrs",r],n)})),e))(e.getIn(["content"]),t.id,t.attrs,t.replaceAllAttrs));case"REMOVE_GLOBAL_MODULE_ATTRIBUTE":return j(),e.set("content",((e,t)=>{const n=e.getIn([t,"props","attrs"]);return e.setIn([t,"props","attrs"],n.without("globalModule"))})(e.getIn(["content"]),t.id));case"REMOVE_GLOBAL_PARENT_ATTRIBUTE":return j(),e.set("content",((e,t)=>{const n=e.getIn([t,"props","attrs"]);return n?e.setIn([t,"props","attrs"],n.without("globalParent")):e})(e.getIn(["content"]),t.id));case"RESET_FLEX_COLUMN_STRUCTURE":return j(),Pt(e,t);case"REMOVE_MODULE":return j(),At(e,t.id,t.builderVersion);case"REMOVE_MODULE_STATE_PROPERTIES":return Gt(e,t.params);case"REMOVE_MODULE_ATTRIBUTE":return j(),e.set("content",Dt(e.getIn(["content"]),t.id,t.attrName));case"REMOVE_MODULE_ATTRIBUTES":return j(),e.set("content",(n=e.getIn(["content"]),r=t.id,t.attrNames.forEach((e=>{n=Dt(n,r,e)})),n));case"REMOVE_COLUMN":return j(),((e,t,n="postContent")=>{let r=e.getIn(["content"]);const o=r.getIn([t],{}),i=o.getIn(["name"],""),a="divi/column"===i||"divi/column-inner"===i;if((0,g.isEmpty)(o)||!a)return e;const s=o.getIn(["parent"]),u=r.getIn([s,"children"],[]).asMutable(),l=u.indexOf(t);if(l<0)return e;const d=[...u];d.splice(l,1),r=r.setIn([s,"children"],d);const c=e.setIn(["content"],r).setIn(["layouts",n,"removedModules",t],{id:t,timestamp:Date.now()});if("flex"===r.getIn([s],{}).getIn(["props","attrs","module","decoration","layout","desktop","value","display"],"block"))return c;const p=u.length-1,m=(0,g.times)(p,(()=>1===p?"4_4":`1_${p}`)).join(",");return Tt(c,s,m)})(e,t.id);case"SET_GLOBAL_MODULE_ATTRIBUTE":return j(),e.set("content",((e,t,n)=>e.setIn([t,"props","attrs","globalModule"],n))(e.getIn(["content"]),t.id,t.value));case"SET_GLOBAL_PARENT_ATTRIBUTE":return j(),e.set("content",((e,t,n)=>e.setIn([t,"props","attrs","globalParent"],n))(e.getIn(["content"]),t.id,t.value));case"SET_LAYOUT_STATE":return j(),e.set(t.location,t.layoutState);case"SET_SPECIALITY_SECTION_STATUS":return j(),e.set("specialtySection",t.status);case"SYNC_GLOBAL_LAYOUT_ATTRIBUTES":return j(),e.set("content",((e,t,n,r)=>{const o=r.map((e=>{const{attrName:t}=e;return t.split(".")})),i=e.asMutable({deep:!0});return e=(e=e.setIn([t,"props","attrs"],n)).setIn([t,"props","attrs","unsyncAttrs"],r),o.forEach((n=>{const r=(0,g.get)(i,[t,"props","attrs",...n]);e=e.setIn([t,"props","attrs",...n],r)})),e})(e.getIn(["content"]),t.id,t.attrs,t.unsyncAttrs));case"SYNC_MODULE_INLINE_FONT":return e.set("content",(e=>{const t={...e},n=(0,g.filter)(t,(e=>{const t=e.getIn(["props","attrs","content","decoration","inlineFont"],[]);return!(0,g.isEmpty)(t)}));return 0===n.length||(0,g.forEach)(n,(t=>{const n=t.getIn(["props","attrs","content","innerContent"],{});(0,g.forEach)(n,((n,r)=>{(0,g.forEach)(n,((n,o)=>{const i=H(n),a=[t.id,"props","attrs","content","decoration","inlineFont",r,o,"families"];e=e.setIn(a,i)}))}))})),e})(e.getIn(["content"])));case"SYNC_MODULE_GLOBAL_COLORS":return e.set("content",((e,t)=>{let n=JSON.stringify({...e});const r=new RegExp(/var[(]--(gcid-([0-9a-z-]*))[)]/,"g"),o=Array.from(n.matchAll(r));if(o.length>0){const e={},r=o.map((e=>e[1]));(0,g.forEach)(t,((t,n)=>{r.includes(n)&&(e[n]=t)})),(0,g.isEmpty)(e)||(0,g.forEach)(e,((e,t)=>{"inactive"===e.status&&(n=n.replace(new RegExp(`var[(]--${t}[)]`,"g"),e.color))}))}try{let t=i()(e);const r=JSON.parse(n);return Object.keys(r).forEach((e=>{t=t.setIn([e],r[e])})),t}catch(e){console.error(e)}return e})(e.getIn(["content"]),t.globalColors));case"UPDATE_USED_PRESETS":return e.set("presets",((e,t)=>e.setIn([t.presetType],t.presets))(e.getIn(["presets"]),{presetType:t.presetType,presets:t.presets}));case"REVERT_GLOBAL_MODULE_EDIT_STATE":return j(),e;case"EDIT_GROUP_PRESET_ATTR":return j(),e.set("content",((e,t,n,r)=>e.setIn([t,"props","attrs","groupPreset",n],r))(e.getIn(["content"]),t.id,t.attrName,t.value));case"SET_MODULE_LOOP_DATA":return j(),e.setIn(["loopData"],((e,t,n)=>(e.getIn(["loopData"])||e.set("loopData",{}).getIn(["loopData"])).set(t,{queryItems:n.queryItems}))(e,t.id,t.loopData));default:return e}var n,r},Pn=(e,t)=>t?.path&&!(0,g.isEmpty)(t.path)?e.getIn(t?.path):e,Nn={};window?.DiviEditPostData?.debug?.storeStateModal&&(Nn.debugState=Pn);const wn=n=>{if((0,a.select)("divi/edit-post"))return;(0,a.select)("divi/module")||(0,l.registerModuleStore)(),(0,a.select)("divi/module-library")||(0,d.registerModuleLibraryStore)(),(0,a.select)("divi/history")||(0,s.registerHistoryStore)();const r=n||i()(((e="postContent")=>{const t=(0,a.select)("divi/serialized-post").getState([e,"content"]),n=W(t);return{content:n,specialtySection:!1,layouts:{postContent:{removedModules:{}}},presets:{module:(0,J.populateUsedPresets)(n),group:(0,J.populateUsedGroupPresets)(n)}}})("postContent")),o=(0,a.registerStore)("divi/edit-post",{actions:e,reducer:Un,selectors:{...t,...Nn},initialState:r});(0,u.applyMiddlewares)(o,bt),(0,u.applyEffects)(o,ht),ee({type:"SET_LAYOUT_STATE",location:"content",layoutState:r?.getIn(["content"])},o)}}(),(window.divi=window.divi||{}).editPost=r}();